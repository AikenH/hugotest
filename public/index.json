[{"content":"è¯¥æ–‡ç« ä¼šæµ‹è¯•å„ç§åç»­ä¿®æ”¹ï¼ŒåŒ…æ‹¬åŸºç¡€å­—ä½“ï¼Œå„ç§åç»­æ·»åŠ é€‚é…çš„shortcodesï¼š å¦‚ alertã€è§†é¢‘ã€widget ï¼ŒåŒ…æ‹¬å­—ä½“æ¸²æŸ“ï¼Œè§†é¢‘æ¸²æŸ“ï¼Œiframeæ¸²æŸ“ï¼Œä»¥åŠç›¸å…³çš„ä¸€äº›å…¶ä»–ä¿®æ”¹ï¼Œ åŒæ—¶æ–‡ç« ç”±äºå¼•å…¥äº†å¤§é‡çš„jsï¼Œå¯¼è‡´ä¸€äº›åŠŸèƒ½çš„æ¸²æŸ“é€Ÿåº¦ä¼šä¸‹é™ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬æ‰¾åˆ°åŠ è½½çš„ç“¶é¢ˆï¼›\nExtend ShortCodes encrypt æ–‡ç« çš„éƒ¨åˆ†å†…å®¹è¢«å¯†ç ä¿æŠ¤ï¼š\n--- DON'T MODIFY THIS LINE ---\rhere is a long message.\nseems like we can only entrypt once in one markdown, if we encrypt multiplytimes, the function will make the password error.\nsidenote abc\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industryâ€™s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. def Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industryâ€™s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industryâ€™s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\nTimeline 2023-10-01 èŠ‚æ—¥ å›½åº†èŠ‚ ç¥–å›½ç”Ÿæ—¥å¿«ä¹ 2024-01-01 èŠ‚æ—¥\u0026amp;è®¡åˆ’ å…ƒæ—¦èŠ‚ ä¸ŠåŒ—äº¬er Chat metisy\u0026nbsp;\u0026nbsp;\u0026nbsp;2024-11-25 19:31 è¿™æ˜¯å·¦è¾¹çš„æ¶ˆæ¯å†…å®¹ã€‚ 2024-11-25 19:32\u0026nbsp;\u0026nbsp;\u0026nbsp;aikenh è¿™æ˜¯å³è¾¹çš„æ¶ˆæ¯å†…å®¹ï¼Œæµ‹è¯•é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿åº¦ã€‚ quota-center åé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™\næ•°å£°å•¼é¸Ÿæ€¨å¹´å\nåˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯\nç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœ\nç»¿æ¨å ¤ç•”é—®è·èŠ±\nè®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶\nquota åé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™ã€‚æ•°å£°å•¼é¸Ÿæ€¨å¹´åã€‚åˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯ã€‚ç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœã€‚ç»¿æ¨å ¤ç•”é—®è·èŠ±ã€‚è®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶ã€‚\nsimple-notice åé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™ã€‚æ•°å£°å•¼é¸Ÿæ€¨å¹´åã€‚åˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯ã€‚ç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœã€‚ç»¿æ¨å ¤ç•”é—®è·èŠ±ã€‚è®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶ã€‚\nåé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™ã€‚æ•°å£°å•¼é¸Ÿæ€¨å¹´åã€‚åˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯ã€‚ç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœã€‚ç»¿æ¨å ¤ç•”é—®è·èŠ±ã€‚è®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶ã€‚\nåé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™ã€‚æ•°å£°å•¼é¸Ÿæ€¨å¹´åã€‚åˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯ã€‚ç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœã€‚ç»¿æ¨å ¤ç•”é—®è·èŠ±ã€‚è®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶ã€‚\nnotice åé‡Œé’å±±è¿œï¼Œæ½®å¹³è·¯å¸¦æ²™ã€‚æ•°å£°å•¼é¸Ÿæ€¨å¹´åã€‚åˆæ˜¯å‡„å‡‰æ—¶å€™ï¼Œåœ¨å¤©æ¶¯ã€‚ç™½éœ²æ”¶æ®‹æœˆï¼Œæ¸…é£æ•£æ™“éœã€‚ç»¿æ¨å ¤ç•”é—®è·èŠ±ã€‚è®°å¾—å¹´æ—¶æ²½é…’ï¼Œé‚£äººå®¶ã€‚\ngithub widget Organic-Carbon-Estimating A program used in estimating organic carbon stocks in oceans. è®¡ç®—æŒ‡å®šæµ·åŸŸçš„æœ‰æœºç¢³å­˜é‡ï¼ŒåŒ…æ‹¬é¢—ç²’æœ‰æœºç¢³ä¸æº¶è§£æœ‰æœºç¢³ï¼Œæ•°æ®ä¾èµ–äº NASA ä¸­åˆ†è¾¨ç‡æˆåƒå…‰è°±ä»ª MODIS é¥æ„Ÿäº§å“ã€‚ MATLAB align æ–‡å­—å±…å·¦\næ–‡å­—å±…ä¸­\næ–‡å­—å±…å³\nVideo Function bilibili BV12NpBeYErP Markdown Function Expand Support pangujs è¿™æ˜¯ä¸€æ®µæµ‹è¯•panguä¹‹ç™½çš„articleï¼Œçœ‹çœ‹æ¸²æŸ“å‡ºæ¥çš„æ•ˆæœå¦‚ä½•\nAlert Block æ¥ä¸‹æ¥æµ‹è¯•å„ä¸ªå…³é”®è¯çš„æ¸²æŸ“æ•ˆæœå¹¶è¿›è¡Œè°ƒæ•´ï¼Œ é¦–å…ˆå°±æ˜¯ Note\nNote\rtest note block\u0026rsquo;s style.\nå…¶æ¬¡æ˜¯ï¼šimportant\nImportant\ré‡è¦å†…å®¹\næ¥ç€æ˜¯ï¼štip\nTip\rè¿™æ˜¯ä¸€äº›æç¤ºå†…å®¹\nå†æ¬¡æ˜¯ warning\nWarning\rè¿™æ˜¯ä¸€äº›å‘Šè­¦å†…å®¹\næœ€åæ˜¯caution\nCaution\ré‡è¦å†…å®¹\nç„¶åæµ‹è¯•ä¸€ä¸ªè‡ªå·±æ·»åŠ çš„\nSummary\ræ€»ç»“\nmermaid mermaid çš„è·Ÿéšä¸»é¢˜åˆ‡æ¢æ›´æ”¹æ¸²æŸ“çš„æ–¹å¼ä¸€ç›´ä¸workï¼Œæš‚æ—¶ä½¿ç”¨black themeåŠ æ¸²æŸ“çš„æ–¹å¼åšå¤„ç†ã€‚\nflowchart LR G[å·¥ä½œå¼ºåº¦] G --\u0026gt; A G --\u0026gt; C G --\u0026gt; E A[\u0026#34;ä¸»åŠ¨\u0026#34;ç­–ç•¥] --\u0026gt; B[å·ï¼ŒæŒ‰ç…§è¡¨ç°è¾é€€ï¼Œ å·¥ä½œæ—¶é—´é•¿ï¼Œè–ªèµ„æ„æˆ=åŸºæœ¬å·¥èµ„+åŸºé‡‘è¡¨ç°*è´¡çŒ®Rate] C[\u0026#34;è¢«åŠ¨\u0026#34;è·Ÿè¸ª] --\u0026gt; D[WLB, å›ºå®šå·¥èµ„ï¼Œæ™‹å‡-\u0026gt;ç®¡ç†] E[\u0026#34;æ··åˆ\u0026#34;] --\u0026gt; F[ä»‹äºä¸¤è€…ä¹‹é—´ï¼Œè–ªèµ„ä¸å…¬å¸è¡¨ç°æŒ‚é’©] ä¸‹é¢ç»™å‡ºä¸€ä¸ªå®˜æ–¹çš„ä¸åŒå®ä¾‹æ¥çœ‹ä¸åŒçš„æ¨¡å¼ä¸‹çš„ä¸åŒæ¸²æŸ“æƒ…å†µ\nsequenceDiagram participant Alice participant Bob Alice-\u0026gt;\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts \u0026lt;br/\u0026gt;prevail! John--\u0026gt;\u0026gt;Alice: Great! John-\u0026gt;\u0026gt;Bob: How about you? Bob--\u0026gt;\u0026gt;John: Jolly good! æœ€åå†æ¥ä¸€ä¸ªå¸¸è§„çš„æµç¨‹å›¾ï¼Œæˆ–è€…è¯´æ˜¯æ¦‚ç‡å›¾\n--- title: Action Distrubution based on Feature --- flowchart LR A[DragonBeenAtkBySomeone] --\u0026gt; B1[Value 1] B1 -- 60% --\u0026gt; C[Atk Target is Dragon] B1 -- 40% --\u0026gt; D[Other Action] A --\u0026gt; B2[Value 0] --\u0026gt; E[All Action Possible] Default ShortCodes gist https://www.andbible.com/post/hugo-content-management-shortcodes/ youtube twitter Owl bet you\u0026#39;ll lose this staring contest ğŸ¦‰ pic.twitter.com/eJh4f2zncC\n\u0026mdash; San Diego Zoo Wildlife Alliance (@sandiegozoo) October 26, 2021 ins View this post on Instagram FI ","permalink":"https://metisy.cool/posts/shotcode_test/","summary":"\u003cp\u003eè¯¥æ–‡ç« ä¼šæµ‹è¯•å„ç§åç»­ä¿®æ”¹ï¼ŒåŒ…æ‹¬åŸºç¡€å­—ä½“ï¼Œå„ç§åç»­æ·»åŠ é€‚é…çš„shortcodesï¼š å¦‚ alertã€è§†é¢‘ã€widget ï¼ŒåŒ…æ‹¬å­—ä½“æ¸²æŸ“ï¼Œè§†é¢‘æ¸²æŸ“ï¼Œiframeæ¸²æŸ“ï¼Œä»¥åŠç›¸å…³çš„ä¸€äº›å…¶ä»–ä¿®æ”¹ï¼Œ\nåŒæ—¶æ–‡ç« ç”±äºå¼•å…¥äº†å¤§é‡çš„jsï¼Œå¯¼è‡´ä¸€äº›åŠŸèƒ½çš„æ¸²æŸ“é€Ÿåº¦ä¼šä¸‹é™ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬æ‰¾åˆ°åŠ è½½çš„ç“¶é¢ˆï¼›\u003c/p\u003e\n\u003ch2 id=\"extend-shortcodes\"\u003eExtend ShortCodes\u003c/h2\u003e\n\u003ch3 id=\"encrypt\"\u003eencrypt\u003c/h3\u003e\n\u003chead\u003e\r\n    \r\n    \u003cscript src=\"https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/crypto-js/3.1.9-1/crypto-js.js\"\u003e\u003c/script\u003e\r\n\u003c/head\u003e\r\n\r\n\r\n\r\n\r\n\r\n\u003cdiv class=\"hugo-encryptor-container\"\u003e\r\n  \u003cdiv class=\"hugo-encryptor-prompt\"\u003e\r\n    \r\n      \u003cp\u003eæ–‡ç« çš„éƒ¨åˆ†å†…å®¹è¢«å¯†ç ä¿æŠ¤ï¼š\u003c/p\u003e\r\n    \r\n  \u003c/div\u003e\r\n  \u003cdiv class=\"hugo-encryptor-form\"\u003e\r\n    \u003cinput\r\n      class=\"hugo-encryptor-input\"\r\n      placeholder='è¯·è¾“å…¥å¯†ç '\r\n    /\u003e\r\n    \u003cinput\r\n      class=\"hugo-encryptor-button\"\r\n      type=\"button\"\r\n      value='CLICK'\r\n      onclick=\"_click_handler(this)\"\r\n    /\u003e\r\n  \u003c/div\u003e\r\n  \u003cdiv\r\n    class=\"hugo-encryptor-cipher-text\"\r\n    data-password=\"password\"\r\n    style=\"display: none;\"\r\n  \u003e\r\n    \u003cspan style=\"display: none;\"\u003e--- DON'T MODIFY THIS LINE ---\u003c/span\u003e\r\n    \u003cp\u003ehere is a long message.\u003c/p\u003e\n\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\u003cscript\u003e\r\n    \r\n\r\n\r\nfunction sanitizeContent(content) {\r\n    \r\n    return content.replace(/[\\x00-\\x1F\\x7F]/g, '').trim(); \r\n}\r\n\r\nfunction encryptContent(password, content) {\r\n    const key = CryptoJS.MD5(password).toString();\r\n    const iv = key.substring(16); \r\n    const paddedContent = padContent(content);\r\n    const encrypted = CryptoJS.AES.encrypt(paddedContent, CryptoJS.enc.Utf8.parse(key), {\r\n        iv: CryptoJS.enc.Utf8.parse(iv),\r\n        mode: CryptoJS.mode.CBC,\r\n        padding: CryptoJS.pad.Pkcs7\r\n    });\r\n    return CryptoJS.enc.Base64.stringify(encrypted.ciphertext);\r\n}\r\n\r\nfunction padContent(content) {\r\n    const blockSize = 32; \r\n    const padlen = blockSize - (content.length % blockSize);\r\n    \r\n    \r\n    return content;\r\n}\r\n\r\nfunction processEncryptedBlocks() {\r\n    const blocks = document.querySelectorAll('.hugo-encryptor-cipher-text');\r\n    blocks.forEach(block =\u003e {\r\n        const password = block.getAttribute('data-password');\r\n        const content = block.innerHTML.trim(); \r\n        const sanitizedContent = sanitizeContent(content); \r\n        const encryptedContent = encryptContent(password, sanitizedContent);\r\n        block.innerHTML = encryptedContent;\r\n        block.removeAttribute('data-password');\r\n    });\r\n\r\n    \r\n    const script = document.createElement('script');\r\n    script.src = '/js/decrypt.js';\r\n    document.body.appendChild(script);\r\n}\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', processEncryptedBlocks);\r\n\u003c/script\u003e\n\u003cp\u003eseems like we can only entrypt once in one markdown, if we encrypt multiplytimes, the function will make the password error.\u003c/p\u003e","title":"ShortCode Function Test"},{"content":"\rSummary\rå¦‚æœé¡µé¢çš„åŠŸèƒ½è¾ƒä¸ºå¤æ‚ï¼Œä¸”æ¶‰åŠåˆ°äº†ä»æœåŠ¡ç«¯è·å–æ•°æ®ç­‰æ“ä½œï¼Œå¦‚æœç®€å•çš„ä½¿ç”¨åŒæ­¥ç¼–ç¨‹ï¼Œç­‰å¾…ä¸€ä¸ªä¸ªä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œç”±äºç½‘ç»œæˆ–è€…æŸäº›æ—¶é—´å¤æ‚åº¦è¾ƒé«˜çš„æ“ä½œï¼Œå¯¼è‡´ç½‘é¡µåŠ è½½æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…ä½¿ç”¨é€»è¾‘ä¸åˆç†ï¼ˆåŠ è½½æŸäº›èµ„æºçš„åŒæ—¶æ— æ³•è¿›è¡Œæµè§ˆç­‰ï¼‰ï¼Œå› æ­¤å¼‚æ­¥ç¼–ç¨‹çš„ç‰¹æ€§åœ¨ web ç«¯æ˜¯ååˆ†é‡è¦çš„ã€‚\né€šè¿‡å¼‚æ­¥ç¼–ç¨‹ä½¿ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡è¿è¡Œçš„åŒæ—¶èƒ½å¤Ÿå¯¹ç½‘é¡µåšå‡ºå…¶ä»–çš„æ“ä½œå’Œå¯¹å…¶ä»–äº‹ä»¶åšå‡ºç›¸åº”ï¼Œè€Œä¸éœ€ç­‰å¾…è¯¥ä»»åŠ¡å®Œæˆï¼Œä»¥ä¸‹çš„è¿™äº›åŠŸèƒ½å°±æ˜¯æœ€å¸¸è§éœ€è¦å¼‚æ­¥å®Œæˆçš„ï¼›\nfetch å‘èµ· http è¯·æ±‚ getUserMedia() è·å–ç”¨æˆ·çš„æ‘„åƒå¤´å’Œéº¦å…‹é£ showOpenFilePicker() è¯·æ±‚ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ä»¥ä¾›è®¿é—®ã€‚ åŸºäºäº‹ä»¶å¤„ç†ç¨‹åºå®ç°å¼‚æ­¥ äº‹ä»¶å¤„ç†çš„é€»è¾‘å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§æ¥è¿‘å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ï¼Œå¯¹åº”çš„å‡½æ•°ä¸æ˜¯å³æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰äº‹ä»¶è¢«è§¦å‘ååœ¨è¿›è¡Œè°ƒç”¨ã€‚ä¸€äº›æ—©æœŸçš„å¼‚æ­¥ API å°±æ˜¯è¿™æ ·ä½¿ç”¨äº‹ä»¶çš„ã€‚\nä¸€äº›æ—©æœŸçš„å¼‚æ­¥ API å°±æ˜¯è¿™æ ·æ¥ä½¿ç”¨äº‹ä»¶ï¼Œä¾‹å¦‚ XMLHttpRequest å¯ä»¥ä½¿ç”¨ JS å‘è¿œç¨‹æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ï¼Œè¿™ç±»ç½‘ç»œè¯·æ±‚æ“ä½œéƒ½ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œå› æ­¤é€šå¸¸ä¼šä½¿ç”¨å¼‚æ­¥ï¼Œä»¥ä¸‹é¢çš„ä¾‹å­è¿›è¡Œåç»­è¯´æ˜ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 const log = document.querySelector(\u0026#34;.event-log\u0026#34;); document.querySelector(\u0026#34;#xhr\u0026#34;).addEventListenerï¼‰(\u0026#34;click\u0026#34;, () =\u0026gt; { log.textContent = \u0026#34;\u0026#34;; const xhr = new XMLHttpRequest(); xhr.addEvenetLister(\u0026#34;loadend\u0026#34;, () =\u0026gt; { log.textContent = `${log.textContent} å®Œæˆ, çŠ¶æ€ç : ${xhr.status}`; }); xhr.open(\u0026#34;GET\u0026#34;, \u0026#34;https://URL/dir/file.json\u0026#34;); xhr.send(): log.textContent = `${log.textContent} è¯·æ±‚å·²å‘èµ·\\n`; }); xhr æŒ‰é’®ç‚¹å‡»åï¼Œå£°æ˜ä¸€ä¸ª XMLHttpRequest å¯¹è±¡ï¼Œå¹¶ç›‘å¬å…¶ loadend äº‹ä»¶ï¼Œç„¶åå‘é€è¯·æ±‚ï¼Œå¹¶å°†å­—ç¬¦ä¸²ä¿®æ”¹ä¸ºè¯·æ±‚å·²å‘èµ·ï¼Œè¯¥å­—ç¬¦ä¸²ä¼šåœ¨è§¦å‘äº† loadend åŠ è½½å®Œäº†è¯·æ±‚äº‹ä»¶åæ”¹ä¸ºï¼Œå·²å®Œæˆã€‚\näº‹ä»¶å¤„ç†ç¨‹åºæœ¬èº«æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å›è°ƒå‡½æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå¤šå±‚å›è°ƒå‡½æ•°çš„åµŒå¥—ä¼šå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œ debugï¼Œå› æ­¤åé¢å¤§å¤šæ•° API ä¸åœ¨ä½¿ç”¨å›è°ƒå‡½æ•°å»å¤„ç†å¼‚æ­¥çš„æƒ…å†µã€‚\nPromise ç°ä»£ JS å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ PromiseÂ æ˜¯ç°ä»£ JavaScript ä¸­å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ã€‚å®ƒæ˜¯ä¸€ä¸ªç”±å¼‚æ­¥å‡½æ•°è¿”å›çš„å¯¹è±¡ï¼Œå¯ä»¥æŒ‡ç¤ºæ“ä½œå½“å‰æ‰€å¤„çš„çŠ¶æ€ã€‚åœ¨ Promise è¿”å›ç»™è°ƒç”¨è€…çš„æ—¶å€™ï¼Œæ“ä½œå¾€å¾€è¿˜æ²¡æœ‰å®Œæˆï¼Œä½† Promise å¯¹è±¡æä¾›äº†æ–¹æ³•æ¥å¤„ç†æ“ä½œæœ€ç»ˆçš„æˆåŠŸæˆ–å¤±è´¥ã€‚\nä¸€ä¸ªåŸºäº Promise çš„ APIï¼Œå¼‚æ­¥å‡½æ•°ä¼šå¯åŠ¨æ“ä½œå¹¶ç›´æ¥è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥å°†åç»­çš„å¤„ç†å‡½æ•°é™„åŠ åˆ°è¯¥å¯¹è±¡ä¸Šï¼Œå½“æ“ä½œå®Œæˆæ—¶ï¼ˆæˆåŠŸã€å¤±è´¥ï¼‰ï¼Œæ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚\nä»¥ fetch() ä¸ºä¾‹ 1 2 3 4 5 6 7 8 9 10 const fetchPromise = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); console.log(fetchPromise); fetchPromise.then((response) =\u0026gt; { console.log(`å·²å—åˆ°å“åº” ${response.status}`); }); console.log(\u0026#34;å·²å‘é€è¯·æ±‚...\u0026#34;); 1 Promise { \u0026lt;state\u0026gt;: \u0026#34;pending\u0026#34;} è°ƒç”¨ fetch() å°†è¿”å›çš„ promise å­˜å‚¨åˆ° fetchPromise å˜é‡ Promise çš„å˜é‡è¾“å‡ºç»“æœå¦‚ä¸‹ å°†å¤„ç†å‡½æ•°ä¼ é€’ç»™ promise å˜é‡çš„ then å‡½æ•°ï¼Œå½“ fetch æ“ä½œæˆåŠŸçš„æ—¶å€™ï¼Œpromise å°±ä¼šè°ƒç”¨å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚ æ•´ä½“çš„å¤„ç†é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå…³é”®æ˜¯ä½¿ç”¨ promise å˜é‡çš„ then å‡½æ•°å»å¤„ç† fetch çš„å„ç§ä¸åŒç»“æœã€‚\né“¾å¼ä½¿ç”¨ Promise åœ¨å‰é¢é€šè¿‡ fetch è·å– response å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯¹åº”çš„ json() æ–¹æ³•å°†å…¶è½¬æ¢ä¸º js ä¸“å±çš„å¯¹è±¡ï¼Œè¿™é‡Œçš„ json å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥é“¾å¼çš„å®ç°å¼‚æ­¥å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 const fetchPromise = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); fetchPromisze.then((response) =\u0026gt; { const jsonPromise = response.json(); jsonPromise.then((json) =\u0026gt; { console.log(json[0].name); }); }); è¿™ç§æƒ…å†µåœ¨å¤šå±‚åµŒå¥—çš„æ—¶å€™ä¹Ÿä¼šå †å å¾—å¾ˆéš¾ç†è§£ï¼Œä½†æ˜¯ç›¸æ¯”äºå›è°ƒå‡½æ•°ï¼Œæ¯ä¸€çº§çš„å›è°ƒéƒ½ä¼šæœ‰ä¸ª promise çš„å³æ—¶è¿”å›å€¼æ¥æŒ‡ç¤ºå¯¹åº”å¼‚æ­¥å‡½æ•°ä¸­çš„å®ŒæˆçŠ¶æ€ã€‚\nç”±äº promise æ˜¯ä¸€ä¸ªå³æ—¶è¿”å›å€¼ï¼Œå› æ­¤ä¸Šè¿°çš„ä»£ç å¯ä»¥ç®€å†™ä¸ºï¼š\n1 2 3 4 5 fetchPromise .then((response) =\u0026gt; response.json()) .then((data) =\u0026gt; { console.log(data[0].name); }); ä¸å¿…åœ¨ç¬¬ä¸€ä¸ª then ä¸­è°ƒç”¨ä¸‹ä¸€ä¸ª thenï¼Œå¯ä»¥ç›´æ¥è¿”å›å¯¹åº”çš„ promise å¯¹è±¡ï¼Œå¯¹å¯¹åº”çš„ promise å¯¹è±¡è°ƒç”¨å¤„ç†å³å¯ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤šçº§ç¼©è¿›å åŠ ï¼›\nå¤„ç†å¼‚å¸¸è¿”å›å€¼ å¯¹ promise ä¸­çš„çŠ¶æ€å€¼è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœçŠ¶æ€ç ä¸æ˜¯ ok å°±éœ€è¦å¯¹åº”çš„æŠ›å‡ºé”™è¯¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 const fetchPromise = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); fetchPromise .then((response) =\u0026gt; { if(!response.ok){ throw new Error(`HTTP è¯·æ±‚é”™è¯¯ ${response.status}`); } }) .then((json) =\u0026gt; { console.log(json[0].name); }); æ­¤å¤–ç”±äºè¿™ç§å¼‚æ­¥çš„å‡½æ•°è¿”å›æœºåˆ¶ï¼Œå¦‚æœè¦æŒ‰ç…§ä¸Šé¢çš„æ–¹å¼é€ä¸ªè¿›è¡Œé”™è¯¯å¤„ç†éå¸¸çš„å›°éš¾ï¼Œéœ€è¦åœ¨æ¯ä¸ªåµŒå¥—å±‚ä¸­è¿›è¡Œå¤„ç†ï¼Œä¸ºäº†é¿å…è¿™ç§éº»çƒ¦ï¼ŒPromise å¯¹è±¡æä¾›äº†ä¸€ä¸ª catch() æ–¹æ³•ï¼ˆç±»ä¼¼ thenï¼‰ï¼Œå½“è°ƒç”¨æˆåŠŸæ—¶è§¦å‘çš„æ˜¯ then è€Œè°ƒç”¨å¤±è´¥äº†å°±ä¼šè°ƒç”¨ catch ä¸­å®šä¹‰çš„å¤„ç†å‡½æ•°ã€‚\nå°† catch æ·»åŠ åˆ° Promise çš„æœ«å°¾ï¼Œä»–å¯ä»¥åœ¨ä»»ä½•å¼‚æ­¥å‡½æ•°å¤±è´¥çš„æ—¶å€™è°ƒç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 const fetchPromise = fetch( \u0026#34;bad-scheme://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); fetchPromise .then((response) =\u0026gt; { if (!response.ok) { throw new Error(`HTTP è¯·æ±‚é”™è¯¯ï¼š${response.status}`); } return response.json(); }) .then((json) =\u0026gt; { console.log(json[0].name); }) .catch((error) =\u0026gt; { console.error(`æ— æ³•è·å–äº§å“åˆ—è¡¨ï¼š${error}`); }); Promise çš„çŠ¶æ€å€¼ éœ€è¦æ³¨æ„ promise å¯¹åº”çš„æˆåŠŸå’Œå¤±è´¥çš„å«ä¹‰éšç€ API çš„ä¸åŒè€Œä¸åŒï¼Œä¾‹å¦‚ fetch è®¤ä¸ºæœåŠ¡å™¨è¿”å›ä¸€ä¸ªé”™è¯¯å¦‚ï¼ˆ404 not foundï¼‰æ—¶è¯·æ±‚æˆåŠŸï¼Œä½†å¦‚æœç½‘ç»œé”™è¯¯é˜»æ­¢è¯·æ±‚è¢«å‘é€ï¼Œåˆ™è®¤ä¸ºè¯·æ±‚å¤±è´¥ã€‚\nStatus Desc Pending å¾…å®š è¿˜åœ¨è¯·æ±‚ä¸­ï¼Œå°šæœªæœ‰ç¡®å®šçš„ç»“æœï¼Œä¹Ÿæ˜¯åˆå§‹çŠ¶æ€ fulfilled å·²å…‘ç° æ“ä½œæˆåŠŸçš„æ ‡å‡†è¿”å›ï¼Œåç»­è¿›å…¥è°ƒç”¨ then çš„é€»è¾‘ rejected å·²æ‹’ç» æ“ä½œå¤±è´¥çš„æ ‡å‡†è¿”å›ï¼Œåç»­è¿›å…¥è°ƒç”¨ catch çš„é€»è¾‘ æœ‰æ—¶ç”¨**å·²æ•²å®š(settled)æ¥åŒæ—¶è¡¨ç¤ºå·²å…‘ç°å’Œå·²æ‹’ç»ï¼›å¦‚æœä¸€ä¸ª Promise å·²æ•²å®šï¼Œæˆ–è€…ä»–è¢«\u0026quot;é”å®š\u0026quot;ä»¥è·Ÿè¸ªå¦ä¸€ä¸ª Promise çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå°±æ˜¯å·²è§£å†³(resolved)**çš„ã€‚\nç»„å¼ä½¿ç”¨ Promise (åˆå¹¶ä½¿ç”¨) å½“æ“ä½œç”±å¤šä¸ªå¼‚æ­¥å‡½æ•°ç»„æˆï¼Œå¦‚æœéœ€è¦ä¸²è¡Œå®Œæˆé‚£å°±éœ€è¦ promise é“¾ï¼Œå¦‚æœéœ€è¦ç»„åˆä½¿ç”¨å¤šä¸ª promiseï¼Œç›¸äº’ä¹‹é—´ä¸ä¾èµ–ä½†æ˜¯éœ€è¦æ‰€æœ‰ promise éƒ½å®ç°çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘åˆå¹¶å¤šä¸ªå¼‚æ­¥å‡½æ•°çš„ä½¿ç”¨ã€‚\nä½¿ç”¨ Promise.all() æ¥å—ä¸€ä¸ª Promise æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå•ä¸€çš„ Promiseï¼Œä½¿ç”¨è¯¥æ“ä½œé€šè¿‡åˆå¹¶æ¥ç®€åŒ–å¯¹ä¸€æ‰¹ promise çš„å¤„ç†ï¼Œç”± promise.all() è¿”å›çš„ promise æœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š\nä»€ä¹ˆæ—¶å€™è°ƒç”¨ thenï¼Ÿå½“æ•°ç»„ä¸­æ‰€æœ‰ promise éƒ½å…‘ç°æ—¶; ä¼ å…¥ then çš„å½¢å¼å¼ä»€ä¹ˆï¼Ÿæä¾›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å“åº”çš„æ•°ç»„ï¼Œé¡ºåºä¸ä¼ å…¥ all çš„é¡ºåºä¸€è‡´; ä»€ä¹ˆæ—¶å€™æ‹’ç»/è°ƒç”¨catchï¼Ÿä»»ä½•ä¸€ä¸ªpromise æ²¡æœ‰å…‘ç°çš„æ—¶å€™ï¼Œè°ƒç”¨ catchï¼Œå¹¶æä¾›è¢«æ‹’ç»çš„ promise æŠ›å‡ºçš„é”™è¯¯; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 const fetchPromise1 = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); const fetchPromise2 = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/not-found\u0026#34;, ); const fetchPromise3 = fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json\u0026#34;, ); //const fetchPromise3 = fetch( // \u0026#34;bad-scheme://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json\u0026#34;, //); Promise.all([fetchPromise1, fetchPromise2, fetchPromise3]) .then((responses) =\u0026gt; { for (const response of responses) { console.log(`${response.url}ï¼š${response.status}`); } }) .catch((error) =\u0026gt; { console.error(`è·å–å¤±è´¥ï¼š${error}`); }); é€‰æ‹©ä½¿ç”¨ Promise (ä»»ä¸€) å¦‚æœéœ€è¦ä¸€ç»„Promise ä¸­æŸä¸€ä¸ªå®ç°å³å¯ï¼Œè¿™ç§æ—¶å€™å¯ä»¥ä½¿ç”¨ promise.any(), ä»»æ„ä¸€ä¸ªè¢«å…‘ç°æ—¶ä¾¿å…‘ç°ï¼Œä»…å½“æ‰€æœ‰ Promise è¢«æ‹’ç»çš„æ—¶å€™æ‰æ‹’ç»ã€‚\nasync å’Œ await åœ¨å‡½æ•°çš„å¼€å¤´æ·»åŠ  async å…³é”®è¯å¯ä»¥ä½¿å¾—ä¸€ä¸ªå‡½æ•°æˆä¸ºä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼š\n1 2 3 async function myFunction(){ ... } await å…³é”®è¯åˆ™ä½¿å¾—æˆ‘ä»¬ä¸å†å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥å‡½æ•°ï¼Œè€Œæ˜¯åœ¨åŸåœ°ç­‰å¾…è¯¥å¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œä¹Ÿå°±æ˜¯è®²å¼‚æ­¥å‡½æ•°å½“æˆåŒæ­¥å‡½æ•°æ¥ä½¿ç”¨ï¼Œç›´åˆ°å…¶ Promise ç›¸åº”å½»åº•å®Œæˆï¼Œå¦‚ä¸‹å¯ä»¥å°† fetch æ”¹å†™æˆåŒæ­¥å‡½æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 async function fetchProducts() { try { // åœ¨è¿™ä¸€è¡Œä¹‹åï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†ç­‰å¾… `fetch()` è°ƒç”¨å®Œæˆ // è°ƒç”¨ `fetch()` å°†è¿”å›ä¸€ä¸ªâ€œå“åº”â€æˆ–æŠ›å‡ºä¸€ä¸ªé”™è¯¯ const response = await fetch( \u0026#34;https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json\u0026#34;, ); if (!response.ok) { throw new Error(`HTTP è¯·æ±‚é”™è¯¯ï¼š${response.status}`); } // åœ¨è¿™ä¸€è¡Œä¹‹åï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†ç­‰å¾… `response.json()` çš„è°ƒç”¨å®Œæˆ // `response.json()` è°ƒç”¨å°†è¿”å› JSON å¯¹è±¡æˆ–æŠ›å‡ºä¸€ä¸ªé”™è¯¯ const json = await response.json(); console.log(json[0].name); } catch (error) { console.error(`æ— æ³•è·å–äº§å“åˆ—è¡¨ï¼š${error}`); } } fetchProducts(); è¿™ä¸ª fetchProducts() è¿˜æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½æŒ‰ç…§ä»¥ä¸‹çš„æ–¹æ³•è°ƒç”¨ï¼š\n1 2 const promise = fetchProducts(); console.log(promise[0].name); // â€œpromiseâ€æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤è¿™å¥ä»£ç æ— æ³•æ­£å¸¸å·¥ä½œ ç›¸åçš„ï¼Œéœ€è¦æŒ‰ç…§ promise çš„æ–¹å¼å»è°ƒç”¨ï¼š\n1 2 const promise = fetchProducts(); promise.then((data) =\u0026gt; console.log(data[0].name)); åŒæ ·åœ°ï¼Œè¯·æ³¨æ„ä½ åªèƒ½åœ¨Â asyncÂ å‡½æ•°ä¸­ä½¿ç”¨Â awaitï¼Œé™¤éä½ çš„ä»£ç æ˜¯Â JavaScript æ¨¡å— ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨æ™®é€šè„šæœ¬ä¸­è¿™æ ·åšï¼š\nä½ å¯èƒ½ä¼šåœ¨éœ€è¦ä½¿ç”¨ Promise é“¾åœ°æ–¹ä½¿ç”¨Â asyncÂ å‡½æ•°ï¼Œè¿™ä¹Ÿä½¿å¾— Promise çš„å·¥ä½œæ›´åŠ ç›´è§‚ã€‚\nè¯·è®°ä½ï¼Œå°±åƒä¸€ä¸ª Promise é“¾ä¸€æ ·ï¼ŒawaitÂ å¼ºåˆ¶å¼‚æ­¥æ“ä½œä»¥ä¸²è”çš„æ–¹å¼å®Œæˆã€‚å¦‚æœä¸‹ä¸€ä¸ªæ“ä½œçš„ç»“æœå–å†³äºä¸Šä¸€ä¸ªæ“ä½œçš„ç»“æœï¼Œè¿™æ˜¯å¿…è¦çš„ï¼Œä½†å¦‚æœä¸æ˜¯è¿™æ ·ï¼ŒåƒÂ Promise.all()Â è¿™æ ·çš„æ“ä½œä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚\nPromise å®æˆ˜ å‰é¢è®¨è®ºå¦‚ä½•ä½¿ç”¨è¿”å› promise çš„ APIsï¼Œè¿™ä¸€èŠ‚ç ”ç©¶å¦‚ä½•å®ç°è¿”å› Promise çš„ Apisï¼Œè¿™ä¸åŸºäºä½¿ç”¨ promise çš„ APIs ç›¸æ¯”ï¼Œæ˜¯ä¸€ä¸ªä¸å¤ªå¸¸è§çš„ä»»åŠ¡ã€‚å‚è€ƒæ–‡çŒ® mdnå¦‚ä½•å®ç°åŸºäºpromiseçš„api | èœé¸Ÿæ•™ç¨‹JavaScript Promise | å»–é›ªå³°JavaScript ä»¥ä¸€ä¸ªæ™®é€šçš„å›è°ƒè½¬æ¢ä¸º Promise çš„ä¾‹å­æ¥è¯´æ˜ï¼š\n1 2 3 4 5 6 7 8 9 10 const output = document.querySelector(\u0026#34;#output\u0026#34;); const button = document.querySelector(\u0026#34;#set-alarm\u0026#34;); function setAlarm() { window.setTimeout(() =\u0026gt; { output.textContent = \u0026#34;Wake up!\u0026#34;; }, 1000); } button.addEventListener(\u0026#34;click\u0026#34;, setAlarm); åˆ©ç”¨ Promise æ¥æ„é€ åä¼šå˜æˆå¦‚ä¸‹çš„å®ç°ï¼š\n1 2 3 4 5 6 7 8 9 10 function alarm(person, delay) { return new Promise((resolve, reject) =\u0026gt; { if (delay \u0026lt; 0) { throw new Error(\u0026#34;Alarm delay must not be negative\u0026#34;); } window.setTimeout(() =\u0026gt; { resolve(`Wake up, ${person}!`); }, delay); }); } è¯¥å‡½æ•°ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶ä¸­éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒPromise æœ¬èº«éœ€è¦ä¸¤ä¸ªå‚æ•° resolve å’Œ rejectï¼Œå½“æ‰§è¡ŒæˆåŠŸäº†å°±ä¼šè°ƒç”¨ resolveï¼ˆç±»ä¼¼ returnï¼‰ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ rejectï¼Œï¼ˆthrow error çš„éƒ¨åˆ†ï¼‰ï¼Œä¸¤è€…éƒ½å¯ä»¥è®²ä»»ä½•ç±»å‹çš„å•ä¸ªå‚æ•°ä¼ é€’ï¼Œå…·ä½“è€Œè¨€å‚è€ƒåç»­è°ƒç”¨å¦‚ä¸‹ï¼š\n1 2 3 4 5 button.addEventListener(\u0026#34;click\u0026#34;, () =\u0026gt; { alarm(name.value, delay.value) .then((message) =\u0026gt; (output.textContent = message)) .catch((error) =\u0026gt; (output.textContent = `Couldn\u0026#39;t set alarm: ${error}`)); }); å¯ä»¥è®²ä¸€ä¸ªå‡½æ•°å˜æˆå…·å¤‡åŸç”Ÿå¼‚æ­¥åŠŸèƒ½çš„ Promiseï¼Ÿç”±æ­¤æˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶ä½¿ç”¨ await æˆ–è€… async æ¥çµæ´»çš„å†³å®šè¯¥ Function è¦åŒæ­¥æˆ–è€…å¼‚æ­¥æ‰§è¡Œã€‚\nWorkers é¡µé¢çº¿ç¨‹ç®€ä»‹ Summary\rWorker ä½¿é¡µé¢èƒ½åœ¨å•ç‹¬æ‰§è¡Œçš„çº¿ç¨‹ä¸­è¿è¡Œä¸€äº›ä»»åŠ¡ï¼Œé¿å…å› ä¸ºä¸€ä¸ªé•¿æœŸè¿è¡Œçš„åŒæ­¥ä»»åŠ¡ä½¿æ•´ä¸ªä»»åŠ¡å®Œå…¨æ²¡æœ‰å“åº”ã€‚\nä¸€äº›å¤šçº¿ç¨‹çš„ Principleï¼Œé¿å…åŒæ—¶è®¿é—®ç›¸åŒçš„å˜é‡å¸¦æ¥çš„æ„å¤–ç­‰ï¼š\nä¸»ä»£ç å’Œä½ çš„ worker ä»£ç æ°¸è¿œä¸èƒ½ç›´æ¥è®¿é—®å½¼æ­¤çš„å˜é‡ Workers å’Œä¸»ä»£ç è¿è¡Œåœ¨å®Œå…¨åˆ†ç¦»çš„ç¯å¢ƒä¸­ï¼Œåªæœ‰é€šè¿‡ç›¸äº’å‘é€æ¶ˆæ¯æ¥è¿›è¡Œäº¤äº’ è¿™æ„å‘³ç€ workers ä¸èƒ½è®¿é—® DOMï¼ˆçª—å£ã€æ–‡æ¡£ã€é¡µé¢å…ƒç´ ç­‰ç­‰ï¼‰ æœ‰ä¸‰ç§ä¸åŒç±»å‹çš„ workersï¼Œä¸è¿‡è¯¥ç« èŠ‚åªä¼šä»‹ç»ç¬¬ä¸€ä¸ªï¼Œå…¶ä»–ä¸¤ä¸ªç®€è¦çš„è®¨è®ºã€‚\ndedicated workers shared workers service workers ä»¥é¡µé¢ä¸­çš„è´¨æ•°ç”Ÿæˆå™¨ä¸ºä¾‹ï¼Œå¦‚æœä½œä¸ºåŒæ­¥ä»»åŠ¡æ‰§è¡Œï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­æ•´ä¸ªé¡µé¢å°†ä¼šå¡ä½ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼æ¥è®²è®¡ç®—äº¤ä»˜äºå¦ä¸€ä¸ª workerã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 // åœ¨ \u0026#34;generate.js\u0026#34; ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ worker const worker = new Worker(\u0026#34;./generate.js\u0026#34;); // å½“ç”¨æˆ·ç‚¹å‡» \u0026#34;Generate primes\u0026#34; æ—¶ï¼Œç»™ worker å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚ // æ¶ˆæ¯ä¸­çš„ command å±æ€§æ˜¯ \u0026#34;generate\u0026#34;, è¿˜åŒ…å«å¦å¤–ä¸€ä¸ªå±æ€§ \u0026#34;quota\u0026#34;ï¼Œå³è¦ç”Ÿæˆçš„è´¨æ•°ã€‚ document.querySelector(\u0026#34;#generate\u0026#34;).addEventListener(\u0026#34;click\u0026#34;, () =\u0026gt; { const quota = document.querySelector(\u0026#34;#quota\u0026#34;).value; worker.postMessage({ command: \u0026#34;generate\u0026#34;, quota: quota, }); }); // å½“ worker ç»™ä¸»çº¿ç¨‹å›å‘ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œä¸ºç”¨æˆ·æ›´æ–° output æ¡†ï¼ŒåŒ…å«ç”Ÿæˆçš„è´¨æ•°ï¼ˆä» message ä¸­è·å–ï¼‰ã€‚ worker.addEventListener(\u0026#34;message\u0026#34;, (message) =\u0026gt; { document.querySelector(\u0026#34;#output\u0026#34;).textContent = `Finished generating ${message.data} primes!`; }); document.querySelector(\u0026#34;#reload\u0026#34;).addEventListener(\u0026#34;click\u0026#34;, () =\u0026gt; { document.querySelector(\u0026#34;#user-input\u0026#34;).value = \u0026#39;Try typing in here immediately after pressing \u0026#34;Generate primes\u0026#34;\u0026#39;; document.location.reload(); }); é€šè¿‡ worker.postMessage æ¥å’Œå¯¹åº”çš„çº¿ç¨‹ä¼ é€’ä¿¡æ¯ï¼Œåœ¨å¯¹åº”çš„ worker ä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹çš„æ–¹å¼æ¥æ¥å—å’Œä¼ é€’ä¿¡æ¯ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // ç›‘å¬ä¸»çº¿ç¨‹ä¸­çš„æ¶ˆæ¯ã€‚ // å¦‚æœæ¶ˆæ¯ä¸­çš„ command æ˜¯ \u0026#34;generate\u0026#34;ï¼Œåˆ™è°ƒç”¨ `generatePrimse()` addEventListener(\u0026#34;message\u0026#34;, (message) =\u0026gt; { if (message.data.command === \u0026#34;generate\u0026#34;) { generatePrimes(message.data.quota); } }); // ç”Ÿæˆè´¨æ•° (éå¸¸ä½æ•ˆ) function generatePrimes(quota) { function isPrime(n) { for (let c = 2; c \u0026lt;= Math.sqrt(n); ++c) { if (n % c === 0) { return false; } } return true; } const primes = []; const maximum = 1000000; while (primes.length \u0026lt; quota) { const candidate = Math.floor(Math.random() * (maximum + 1)); if (isPrime(candidate)) { primes.push(candidate); } } // å®Œæˆåç»™ä¸»çº¿ç¨‹å‘é€ä¸€æ¡åŒ…å«æˆ‘ä»¬ç”Ÿæˆçš„è´¨æ•°æ•°é‡çš„æ¶ˆæ¯æ¶ˆæ¯ã€‚ postMessage(primes.length); } worker è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å¼€å§‹ç›‘å¬æ¥è‡ªä¸»è„šæœ¬çš„æ¶ˆæ¯ã€‚è¿™é€šè¿‡ä½¿ç”¨Â addEventListener()Â å®ç°ï¼Œå®ƒåœ¨ worker ä¸­æ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ã€‚åœ¨Â messageÂ äº‹ä»¶å¤„ç†å™¨å†…éƒ¨ï¼Œäº‹ä»¶çš„Â dataÂ å±æ€§åŒ…å«ä¸€ä¸ªæ¥è‡ªä¸»è„šæœ¬çš„å‚æ•°çš„å‰¯æœ¬ã€‚\nNote\r**å¤‡æ³¨ï¼š**è¦è¿è¡Œæ­¤ç«™ç‚¹ï¼Œä½ å¿…é¡»è¿è¡Œä¸€ä¸ªæœ¬åœ° web æœåŠ¡å™¨ï¼Œå› ä¸º file:// URLs ä¸å…è®¸åŠ è½½ workersã€‚å‚è€ƒæˆ‘ä»¬çš„è®¾ç½®ä¸€ä¸ªæœ¬åœ°æµ‹è¯•æœåŠ¡å™¨ çš„æŒ‡å¯¼ã€‚å®Œæˆåï¼Œä½ åº”è¯¥å¯ä»¥ç‚¹å‡» \u0026ldquo;Generate primes\u0026rdquo; å¹¶ä¸”ä½¿ä½ çš„ä¸»é¡µé¢ä¿æŒå“åº”ã€‚ å¦‚æœä½ åœ¨åˆ›å»ºå’Œè¿è¡Œè¿™ä¸ªæ ·ä¾‹çš„è¿‡ç¨‹ä¸­æœ‰ç–‘é—®ï¼Œä½ å¯ä»¥åœ¨Â https://github.com/mdn/learning-area/blob/main/javascript/asynchronous/workers/finished æŸ¥çœ‹å®Œæˆåçš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”åœ¨Â https://mdn.github.io/learning-area/javascript/asynchronous/workers/finished è¿›è¡Œåœ¨çº¿å°è¯•ã€‚\næˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ worker è¢«ç§°ä¸ºÂ dedicated workerã€‚è¿™æ„å‘³ç€å®ƒç”±ä¸€ä¸ªè„šæœ¬å®ä¾‹ä½¿ç”¨ã€‚\nä¸è¿‡ï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„ workerï¼š\nSharedWorker å¯ä»¥ç”±è¿è¡Œåœ¨ä¸åŒçª—å£ä¸­çš„å¤šä¸ªä¸åŒè„šæœ¬å…±äº«ã€‚ Service worker çš„è¡Œä¸ºå°±åƒä»£ç†æœåŠ¡å™¨ï¼Œç¼“å­˜èµ„æºä»¥ä¾¿äº web åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ç”¨æˆ·ç¦»çº¿æ—¶å·¥ä½œã€‚ä»–ä»¬æ˜¯æ¸è¿›å¼ Web åº”ç”¨ çš„å…³é”®ç»„ä»¶ã€‚ ","permalink":"https://metisy.cool/posts/learnweb21-js06-%E5%BC%82%E6%AD%A5js/","summary":"\u003cblockquote class=\"alert-blockquote alert-summary\"\u003e\r\n  \u003cp class=\"alert-heading\"\u003e\r\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"\u003e\r\n      \u003cpath d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"\u003e\u003c/path\u003e\r\n    \u003c/svg\u003e\r\n    \u003cspan\u003eSummary\u003c/span\u003e\r\n  \u003c/p\u003e\r\n  \u003cp\u003eå¦‚æœé¡µé¢çš„åŠŸèƒ½è¾ƒä¸ºå¤æ‚ï¼Œä¸”æ¶‰åŠåˆ°äº†ä»æœåŠ¡ç«¯è·å–æ•°æ®ç­‰æ“ä½œï¼Œå¦‚æœç®€å•çš„ä½¿ç”¨åŒæ­¥ç¼–ç¨‹ï¼Œç­‰å¾…ä¸€ä¸ªä¸ªä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œç”±äºç½‘ç»œæˆ–è€…æŸäº›æ—¶é—´å¤æ‚åº¦è¾ƒé«˜çš„æ“ä½œï¼Œå¯¼è‡´ç½‘é¡µåŠ è½½æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…ä½¿ç”¨é€»è¾‘ä¸åˆç†ï¼ˆåŠ è½½æŸäº›èµ„æºçš„åŒæ—¶æ— æ³•è¿›è¡Œæµè§ˆç­‰ï¼‰ï¼Œå› æ­¤å¼‚æ­¥ç¼–ç¨‹çš„ç‰¹æ€§åœ¨ web ç«¯æ˜¯ååˆ†é‡è¦çš„ã€‚\u003c/p\u003e\n\r\n\u003c/blockquote\u003e\r\n\u003cp\u003eé€šè¿‡\u003cstrong\u003eå¼‚æ­¥ç¼–ç¨‹\u003c/strong\u003eä½¿ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡è¿è¡Œçš„åŒæ—¶èƒ½å¤Ÿå¯¹ç½‘é¡µåšå‡ºå…¶ä»–çš„æ“ä½œå’Œå¯¹å…¶ä»–äº‹ä»¶åšå‡ºç›¸åº”ï¼Œè€Œä¸éœ€ç­‰å¾…è¯¥ä»»åŠ¡å®Œæˆï¼Œä»¥ä¸‹çš„è¿™äº›åŠŸèƒ½å°±æ˜¯æœ€å¸¸è§éœ€è¦å¼‚æ­¥å®Œæˆçš„ï¼›\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003efetch\u003c/code\u003e å‘èµ· http è¯·æ±‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egetUserMedia()\u003c/code\u003e è·å–ç”¨æˆ·çš„æ‘„åƒå¤´å’Œéº¦å…‹é£\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eshowOpenFilePicker()\u003c/code\u003e è¯·æ±‚ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ä»¥ä¾›è®¿é—®ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŸºäºäº‹ä»¶å¤„ç†ç¨‹åºå®ç°å¼‚æ­¥\"\u003eåŸºäºäº‹ä»¶å¤„ç†ç¨‹åºå®ç°å¼‚æ­¥\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eäº‹ä»¶å¤„ç†çš„é€»è¾‘å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§æ¥è¿‘å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ï¼Œå¯¹åº”çš„å‡½æ•°ä¸æ˜¯å³æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰äº‹ä»¶è¢«è§¦å‘ååœ¨è¿›è¡Œè°ƒç”¨ã€‚ä¸€äº›æ—©æœŸçš„å¼‚æ­¥ API å°±æ˜¯è¿™æ ·ä½¿ç”¨äº‹ä»¶çš„ã€‚\u003c/p\u003e","title":"LearnWeb21-JS06-å¼‚æ­¥JS"},{"content":"\rSummary\ræœ¬æ–‡ä¸»è¦ä»‹ç»ç¬”è€…çš„å®¶åº­æœåŠ¡å™¨è®¾è®¡æ–¹æ¡ˆ V1ã€‚è¯¥æ–¹æ¡ˆä¸­ä¸­æ¶µç›–å½±è§†ã€å›¾åƒã€å›¾ä¹¦\u0026amp;æ–‡çŒ®ã€åšå®¢ã€æ™ºèƒ½å®¶å±…ç®¡ç†ã€å¯†ç ç®¡ç†æœåŠ¡ï¼Œä»¥åŠå…¬ç½‘ä¸Šå†…å®¹åˆ†å‘çš„åˆæ­¥è®¾è®¡å’Œé€‰æ‹©çš„è€ƒé‡ã€‚\næ•´ä½“æ¶æ„ æ•´ä¸ªæœåŠ¡ä¸­å¿ƒåœ¨è®¾è®¡çš„æ—¶å€™ä¸»è¦è€ƒè™‘ä»¥ä¸‹çš„å‡ ä¸ªæ–¹é¢ï¼š\nğŸ’»æ“ä½œè®¾å¤‡\u0026amp;ç³»ç»Ÿ(OS)å’Œå†…å®¹å­˜å‚¨æ–¹æ¡ˆï¼šå¦‚ä½•ç»æµå®æƒ çš„é€‰æ‹©åˆé€‚çš„è®¾å¤‡å’Œç³»ç»Ÿ ğŸŒ¦ï¸æœåŠ¡éœ€æ±‚ï¼šéœ€è¦æ­å»ºå“ªäº›æœåŠ¡ï¼Œåº”è¯¥é€‰æ‹©å“ªä¸ªæœåŠ¡è¿›è¡Œè‡ªæ‰˜ç®¡ ğŸŒéƒ¨ç½²æ–¹æ¡ˆï¼šå¦‚ä½•ä¿è¯åœ¨å±€åŸŸç½‘+å…¬ç½‘éƒ½èƒ½é¡ºåˆ©ä¸”å®‰å…¨çš„è®¿é—® ğŸ“±è®¿é—®ç­–ç•¥ï¼šå„ä¸ªå¹³å°ä¸Šçš„è®¿é—®æ–¹å¼çš„é€‰æ‹© æ­¤å¤–ï¼Œå¹¶éæ‰€æœ‰æœåŠ¡éƒ½éœ€è¦åœ¨å…¬ç½‘ä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œè¿™é‡Œçš„éƒ¨åˆ†æœåŠ¡å¯ä»¥ä»…ç”¨äºå±€åŸŸç½‘ï¼Œç”±äºä»…å¼€æ”¾äº† Nginx ç«¯å£ï¼Œå› æ­¤ä»å…¬ç½‘ä¸­è®¿é—®ä¸åˆ°æœªåˆ†å‘çš„å†…å®¹ï¼Œå› æ­¤ï¼Œéƒ¨åˆ†å­˜å‚¨ä¸æ•æ„Ÿä¿¡æ¯ç›¸å…³çš„æœåŠ¡å¯ä»¥ä»…ä¿ç•™åœ¨å±€åŸŸç½‘ä¸­è¿›è¡Œè®¿é—®ã€‚\nNote\råœ¨è¿™ç§æƒ…å†µä¸‹å¦‚æœå¸Œæœ›èƒ½å¤Ÿä½¿ç”¨ä¸€è‡´çš„åŸŸåè®¿é—®æ–¹å¼ï¼Œæ˜¯å¦å¯ä»¥è€ƒè™‘ä½¿ç”¨ Nginx é‰´æƒé™åˆ¶è®¿é—® ip ä¸ºå†…ç½‘ ipï¼Œå…¶ä»–å…¬ç½‘è®¿é—®ç›´æ¥ä¸¢å¼ƒï¼Ÿ\nåˆç‰ˆå®¶åº­æœåŠ¡ä¸­å¿ƒçš„æ¶æ„å›¾å¦‚ä¸‹ï¼Œ(è¿™é‡Œå¹¶éåˆ—å‡ºæ‰€æœ‰çš„æœåŠ¡ç»„ä»¶)ï¼Œè¯¥æ¶æ„å›¾ä¸­æ‰€æœ‰çš„åº”ç”¨éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å„é¡¹æ´»åŠ¨ï¼Œä¸‹é¢ä¼šå¯¹æ¶æ„å›¾è‡ªåº•å‘ä¸Šçš„åšä¸€äº›ç®€å•çš„è¯´æ˜ã€‚\nè®¾å¤‡å’Œå­˜å‚¨é€‰æ‹© å­˜å‚¨å’Œè®¾å¤‡çš„é€‰æ‹©ä¸»è¦æ¥è‡ªä»¥ä¸‹çš„ä¸¤ä¸ªéœ€æ±‚ï¼Œé¦–å…ˆæ˜¯èƒ½å¤Ÿç”¨ä½œæœºé¡¶ç›’ï¼Œå…¶æ¬¡æ˜¯å°½é‡èƒ½çœåˆ™çœï¼Œç»¼åˆè€ƒè™‘ä¸Šè¿°çš„ä¸¤ä¸ªéœ€æ±‚ï¼Œæ ‘è“æ´¾+ç½‘ç»œäº‘ç›˜çš„ç­–ç•¥æœ‰å¦‚ä¸‹çš„å‡ ä¸ªä¼˜åŠ¿ï¼Œä¹Ÿæ˜¯é€‰æ‹©å®ƒçš„åŸå› ï¼š\nè®¾å¤‡å’Œå­˜å‚¨ä»·æ ¼ç›¸å¯¹ä¾¿å®œï¼Œé•¿æ—¶é—´åœ¨çº¿ç”µè´¹æ¶ˆè€—ä¹Ÿå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ ä½“ç§¯è¾ƒå°ï¼Œä½œä¸ºæœºé¡¶ç›’æ”¾ç½®çš„æ–¹å¼è¾ƒä¸ºç®€å• äº‘ç›˜çš„è½¬å­˜å’Œèµ„æºæ”¶é›†çš„é€Ÿåº¦å¿«ï¼Œä¸”å¯ç»“åˆå°é›…å’Œ Alist è¿›è¡Œç½‘ç›˜çš„é›†æˆï¼Œä»¥åŠçº¿ä¸Šèµ„æºçš„æ•´åˆã€‚ åŠ£åŠ¿å°±åœ¨äºéæœ¬åœ°å­˜å‚¨å’Œå¯¹ç½‘ç»œçš„è¦æ±‚ç›¸å¯¹è¾ƒé«˜ä¸€äº›ï¼Œä¸”åœ¨ç³»ç»Ÿä¸Šéœ€è¦æŠ˜è…¾çš„æ—¶é—´ä¼šæ¯”æˆç†Ÿçš„ NAS å‚å®¶çš„å¼€ç®±å³ç”¨è¦æŠ˜è…¾ä¸€äº›ï¼Œæœ€åå°±æ˜¯ä¸€äº›å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„æœåŠ¡æ ‘è“æ´¾å¯èƒ½æ— æ³•æ‰¿æ‹…è¿™ä¸ªèŒè´£ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨è‡ªå·±çš„ä¸ªäººç”µè„‘ç”¨æ¥éƒ¨ç½²ä¸€äº›å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„æœåŠ¡ã€‚\næœåŠ¡éƒ¨ç½²ç­–ç•¥ docker åœ¨æœåŠ¡éƒ¨ç½²çš„ä¼˜åŠ¿æœ‰ï¼šç‹¬ç«‹äº’ä¸å½±å“çš„ç¯å¢ƒå’Œä¸€é”®éƒ¨ç½²æ–¹ä¾¿æ€§ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ docker è¿›è¡Œå‡ ä¹æ‰€æœ‰çš„æœåŠ¡çš„éƒ¨ç½²ï¼Œå¹¶ä½¿ç”¨ portainer å¯¹å…¶è¿›è¡Œç®¡ç†ã€‚\nå›¾ä¹¦\u0026amp;æ¼«ç”»ï¼šä½¿ç”¨ Kavita+Calibreï¼ˆè¿›è¡Œèµ„æºçš„è½¬æ¢å’Œå…ƒä¿¡æ¯çš„ä¸å…¨ï¼‰+ ï¼ˆZlibray\u0026amp;æ¼«è‡ªç”±ï¼‰è·å–èµ„æºã€‚ ç…§ç‰‡ï¼šä½¿ç”¨ Immich æ»¡è¶³æ•´ä¸ªå®¶åº­å¤‡ä»½æ‰‹æœºç…§ç‰‡å¹¶è¿›è¡Œç»Ÿä¸€ç®¡ç†çš„éœ€æ±‚ï¼Œå¯å®Œå…¨ä»£æ›¿ icloud ä¸”åªéœ€è¦æœ¬åœ°ç£ç›˜ã€‚ å½±è§†ï¼šä½¿ç”¨ Alist æ•´åˆè‡ªå·±çš„ç½‘ç›˜ + çº¿ä¸Šçš„ xiaoya çš„ alist èµ„æº + emby åšä¸€ä¸ªå½±è§†å¢™ï¼ˆå¯é€‰ï¼‰+ Kodi è¿›è¡Œç”µè§†ç«¯çš„æ’­æ”¾ï¼ˆKOREï¼Œkodi æ‰‹æœºç«¯çš„å®˜æ–¹é¥æ§å™¨ï¼‰ æ™ºèƒ½å®¶å±…ï¼šä½¿ç”¨ HomeAssistant ç®¡ç†å„ç§ä¸åŒå“ç‰Œçš„æ™ºèƒ½å®¶å±…è®¾å¤‡ æœåŠ¡åˆ†å‘å’ŒæœåŠ¡è®¿é—® è¿™é‡Œä½¿ç”¨ Nginx+è…¾è®¯äº‘è¿›è¡ŒæœåŠ¡çš„åˆ†å‘ï¼Œå¹¶é€šè¿‡ DDNSgo åŠ¨æ€æ›´æ–°åŸŸåè§£æçš„ IPV6 åœ°å€ï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡åŸŸåå¯¹ç›¸åº”æœåŠ¡è¿›è¡Œè®¿é—®ã€‚\nå¯ç”¨ Caddy è¿™ä¸ªç°åœ¨çš„åæœŸä¹‹ç§€æ¥ä»£æ›¿ Nginxï¼ŒNginx ä¹Ÿå¯ä»¥å®‰è£…å¯¹åº”çš„å¯è§†åŒ–è®¾ç½®ç•Œé¢ã€‚\nä¸Šè¿°æåˆ°çš„æ˜¯åŸºäº ipv6 éƒ¨ç½²åˆ°å…¬ç½‘åçš„åˆ†å‘æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…ä¸æƒ³éƒ¨ç½²å…¬ç½‘çš„è¯å°±ä½¿ç”¨å¦‚ Zerotier å’Œ Tailscale çš„å†…ç½‘ç©¿é€æœåŠ¡æ¥å®ç°è™šæ‹Ÿå†…ç½‘ ip+ç«¯å£å»è®¿é—®æœåŠ¡ã€‚\nåœ¨å„ä¸ªç»ˆç«¯ä¸Šçš„æœåŠ¡è®¿é—®å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„ä¿å­˜ä¸ºåº”ç”¨/å›ºå®šåˆ°æ¡Œé¢ï¼Œä»¥åŠå„è‡ªå¯¹åº”çš„å®˜æ–¹ APP ä¸ºä¸»è¦çš„è®¿é—®æ‰‹æ®µã€‚\nåç»­è®¡åˆ’ Note\rè¿™é‡Œè®°å½•åç»­å¸Œæœ›è¿›è¡Œè¡¥å……çš„æœåŠ¡å’Œè®¾è®¡ï¼Œæœ€ç»ˆå¸Œæœ›èƒ½å¤Ÿä½œä¸ºä¸€ä¸ªæ¯”è¾ƒå…¨é¢ä¸”å®Œæ•´çš„æ–¹æ¡ˆï¼Œè¦†ç›–åˆ°ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ï¼Œä¸ºè‡ªå·±å’Œæœ‹å‹çš„ç”Ÿæ´»æä¾›ä¾¿åˆ©ã€‚\nè®¾è®¡ StableDiffusionWEBui çš„é‰´æƒé¡µé¢ï¼Œæ–¹ä¾¿éƒ¨ç½²åˆ°å…¬ç½‘ä¸Šä½¿ç”¨ï¼Œæ–¹ä¾¿ä½œå›¾éœ€æ±‚ ç°å·²æ¶µç›–è§†é¢‘å›¾ç‰‡å’Œå›¾ä¹¦ç­‰æœåŠ¡ï¼Œåç»­è€ƒè™‘æ˜¯å¦æœ‰å¿…è¦é’ˆå¯¹éŸ³ä¹æ·»åŠ ç›¸å…³é¡µé¢ (eval) èœè°±ç®¡ç†ä¸­å¿ƒï¼Œæ”¶è—å„ä¸ªä¸åŒçš„å¹³å°çš„èœè°± (eval) RSS Center å¯èƒ½éœ€è¦ RSS-HUB åˆ›å»ºè‡ªå·±å…³å¿ƒçš„æ‰€æœ‰ RSS æºï¼Œç„¶åé€šè¿‡ (eval) ä½¿ç”¨ Ghost å°è¯•æ›´æ–°è‡ªå·±çš„ Blog (eval) æ›´æ–° Homepage æ›´æ–° CodeServerï¼Œæ˜¯å¦è¦åœ¨ç½‘é¡µä¸Šéƒ¨ç½²Vscode FI","permalink":"https://metisy.cool/posts/%E5%AE%B6%E5%BA%AD%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B4%E4%BD%93%E6%96%B9%E6%A1%88/","summary":"\u003cblockquote class=\"alert-blockquote alert-summary\"\u003e\r\n  \u003cp class=\"alert-heading\"\u003e\r\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"\u003e\r\n      \u003cpath d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"\u003e\u003c/path\u003e\r\n    \u003c/svg\u003e\r\n    \u003cspan\u003eSummary\u003c/span\u003e\r\n  \u003c/p\u003e\r\n  \u003cp\u003eæœ¬æ–‡ä¸»è¦ä»‹ç»ç¬”è€…çš„å®¶åº­æœåŠ¡å™¨è®¾è®¡æ–¹æ¡ˆ V1ã€‚è¯¥æ–¹æ¡ˆä¸­ä¸­æ¶µç›–å½±è§†ã€å›¾åƒã€å›¾ä¹¦\u0026amp;æ–‡çŒ®ã€åšå®¢ã€æ™ºèƒ½å®¶å±…ç®¡ç†ã€å¯†ç ç®¡ç†æœåŠ¡ï¼Œä»¥åŠå…¬ç½‘ä¸Šå†…å®¹åˆ†å‘çš„åˆæ­¥è®¾è®¡å’Œé€‰æ‹©çš„è€ƒé‡ã€‚\u003c/p\u003e\n\r\n\u003c/blockquote\u003e\r\n\u003ch2 id=\"æ•´ä½“æ¶æ„\"\u003eæ•´ä½“æ¶æ„\u003c/h2\u003e\n\u003cp\u003eæ•´ä¸ªæœåŠ¡ä¸­å¿ƒåœ¨è®¾è®¡çš„æ—¶å€™ä¸»è¦è€ƒè™‘ä»¥ä¸‹çš„å‡ ä¸ªæ–¹é¢ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eğŸ’»æ“ä½œè®¾å¤‡\u0026amp;ç³»ç»Ÿ(OS)å’Œå†…å®¹å­˜å‚¨æ–¹æ¡ˆï¼šå¦‚ä½•\u003cstrong\u003eç»æµå®æƒ \u003c/strong\u003eçš„é€‰æ‹©åˆé€‚çš„è®¾å¤‡å’Œç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003eğŸŒ¦ï¸æœåŠ¡éœ€æ±‚ï¼šéœ€è¦æ­å»º\u003cstrong\u003eå“ªäº›æœåŠ¡\u003c/strong\u003eï¼Œåº”è¯¥é€‰æ‹©\u003cstrong\u003eå“ªä¸ªæœåŠ¡\u003c/strong\u003eè¿›è¡Œè‡ªæ‰˜ç®¡\u003c/li\u003e\n\u003cli\u003eğŸŒéƒ¨ç½²æ–¹æ¡ˆï¼šå¦‚ä½•ä¿è¯åœ¨å±€åŸŸç½‘+\u003cstrong\u003eå…¬ç½‘\u003c/strong\u003eéƒ½èƒ½é¡ºåˆ©ä¸”\u003cstrong\u003eå®‰å…¨çš„è®¿é—®\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eğŸ“±è®¿é—®ç­–ç•¥ï¼šå„ä¸ªå¹³å°ä¸Šçš„è®¿é—®æ–¹å¼çš„é€‰æ‹©\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ­¤å¤–ï¼Œå¹¶éæ‰€æœ‰æœåŠ¡éƒ½éœ€è¦åœ¨å…¬ç½‘ä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œè¿™é‡Œçš„éƒ¨åˆ†æœåŠ¡å¯ä»¥ä»…ç”¨äºå±€åŸŸç½‘ï¼Œç”±äºä»…å¼€æ”¾äº† Nginx ç«¯å£ï¼Œå› æ­¤ä»å…¬ç½‘ä¸­è®¿é—®ä¸åˆ°æœªåˆ†å‘çš„å†…å®¹ï¼Œå› æ­¤ï¼Œéƒ¨åˆ†å­˜å‚¨ä¸æ•æ„Ÿä¿¡æ¯ç›¸å…³çš„æœåŠ¡å¯ä»¥ä»…ä¿ç•™åœ¨å±€åŸŸç½‘ä¸­è¿›è¡Œè®¿é—®ã€‚\u003c/p\u003e\n\r\n\r\n\r\n  \r\n  \r\n\r\n\u003cblockquote class=\"alert-blockquote alert-note\"\u003e\r\n  \u003cp class=\"alert-heading\"\u003e\r\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"\u003e\r\n      \u003cpath d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"\u003e\u003c/path\u003e\r\n    \u003c/svg\u003e\r\n    \u003cspan\u003eNote\u003c/span\u003e\r\n  \u003c/p\u003e\r\n  \u003cp\u003eåœ¨è¿™ç§æƒ…å†µä¸‹å¦‚æœå¸Œæœ›èƒ½å¤Ÿä½¿ç”¨ä¸€è‡´çš„åŸŸåè®¿é—®æ–¹å¼ï¼Œæ˜¯å¦å¯ä»¥è€ƒè™‘ä½¿ç”¨ Nginx é‰´æƒé™åˆ¶è®¿é—® ip ä¸ºå†…ç½‘ ipï¼Œå…¶ä»–å…¬ç½‘è®¿é—®ç›´æ¥ä¸¢å¼ƒï¼Ÿ\u003c/p\u003e\n\r\n\u003c/blockquote\u003e\r\n\u003cp\u003eåˆç‰ˆå®¶åº­æœåŠ¡ä¸­å¿ƒçš„æ¶æ„å›¾å¦‚ä¸‹ï¼Œ(è¿™é‡Œå¹¶éåˆ—å‡ºæ‰€æœ‰çš„æœåŠ¡ç»„ä»¶)ï¼Œè¯¥æ¶æ„å›¾ä¸­æ‰€æœ‰çš„åº”ç”¨éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å„é¡¹æ´»åŠ¨ï¼Œä¸‹é¢ä¼šå¯¹æ¶æ„å›¾è‡ªåº•å‘ä¸Šçš„åšä¸€äº›ç®€å•çš„è¯´æ˜ã€‚\u003c/p\u003e\n\u003cp\u003e\r\n\u003cdiv class=\"post-img-view\"\u003e\r\n  \u003ca data-fancybox=\"gallery\" href=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/3070PC/20231209082421.png\"\u003e\r\n    \u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/3070PC/20231209082421.png\"class=\"responsive-image\" src=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/3070PC/20231209082421.png\" style=\"display: block; margin: 0 auto;\"\r\n      alt=\"image.png\"  /\u003e\r\n  \u003c/a\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003cscript\u003e\r\n  document.addEventListener(\"DOMContentLoaded\", function() {\r\n      var images = document.querySelectorAll(\".responsive-image\");\r\n      var maxHeight = window.innerHeight / 2.5;\r\n      images.forEach(function(image) {\r\n          image.style.maxHeight = maxHeight + \"px\";\r\n      });\r\n  });\r\n\u003c/script\u003e\r\n\u003c/p\u003e","title":"å®¶åº­æœåŠ¡å™¨æ•´ä½“æ–¹æ¡ˆ"},{"content":" è¯¥ç« èŠ‚ä¸»è¦åŒ…æ‹¬ Promot ç”Ÿæˆå’Œéƒ¨åˆ†å·¥ä½œæµçš„åˆ†æï¼Œæ—¨åœ¨äº†è§£å¦‚ä½•å†™å‡ºæ›´å¥½çš„å…³é”®è¯ï¼Œå¦‚ä½•ç”Ÿæˆæ›´å¥½çš„å›¾ç‰‡ï¼Œå½“æˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆæè¿°çš„æ—¶å€™ä¹Ÿå¯ä»¥å°†è¯¥å·¥ä½œäº¤ç»™ ChatGPTï¼Œè®©å…¶ä¸ºæˆ‘ä»¬æ”¥å†™ä¸€èˆ¬åŸºç¡€çš„æç¤ºè¯\nPrompt ç¼–å†™èŒƒå¼ å‚è€ƒèµ„æ–™ï¼šã€Stable Diffusionã€‘Prompt é€šå¸¸ç¼–å†™å¯ä»¥éµç…§ä»¥ä¸‹çš„ç±»åˆ«è¿›è¡Œç»„ç»‡ï¼Œä¸»è¦æœ‰ \u0026lt;è´¨é‡æ§åˆ¶\u0026gt; + \u0026lt;å‰ç½®\u0026gt; + \u0026lt;ä¸»ä½“\u0026gt; + \u0026lt;åœºæ™¯è¯\u0026gt; å‡ ç±»ï¼Œå…¶ä¸­åˆ†åˆ«åŒ…æ‹¬ä»¥ä¸‹çš„å‡ ç±»è¯ï¼š\nè´¨é‡æ§åˆ¶ï¼šç”»è´¨ã€é•œå¤´æ•ˆæœã€å…‰ç…§æ•ˆæœ å‰ç½®è¯ï¼šç”»é£ã€è‰ºæœ¯å®¶ã€é£æ ¼ ä¸»ä½“ï¼šäººç‰©\u0026amp;å¯¹è±¡ã€å§¿åŠ¿ã€æœè£…ã€é“å…· åœºæ™¯ï¼šç¯å¢ƒã€èƒŒæ™¯ã€ç»†èŠ‚ Additional Networkï¼šè½½å…¥é¢å¤–æ¨¡å‹ åˆ†å‰²ç¬¦å·ï¼š å„ä¸ªå…³é”®è¯ä¹‹é—´ç”¨ , åˆ†å‰²ï¼Œä¸”å¯¹åº”çš„æƒé‡ä»å‰åˆ°åä¾æ¬¡é€’å‡ï¼Œå› æ­¤åœ¨ç¼–å†™å…³é”®è¯çš„æ—¶å€™ä¹Ÿè¦æ³¨æ„å…ˆåé¡ºåºã€‚\næƒé‡åŠ æƒç¬¦å·ï¼šå„ç§æ‹¬å·ä»£è¡¨å„ç§ä¸åŒçš„åŠ æƒç³»æ•°ï¼Œè¿™é‡Œå»ºè®®ç”¨ (prompt: weight) ç»Ÿä¸€æ¥ç¼–å†™æç¤ºè¯çš„æƒé‡è§„åˆ™ï¼Œæ•´ä½“å¯è¯»æ€§ä¼šæ›´å¥½ã€‚\nè¿™é‡Œçš„ weight æŒ‡çš„æ˜¯æƒé‡å˜æˆåŸæœ¬çš„ weight å€ï¼Œå°±å¯ä»¥è°ƒæ•´åŠ å¼ºæˆ–å‡å¼±ã€‚\nå„ä¸ªæ‹¬å·çš„é»˜è®¤ç³»æ•°å¦‚ä¸‹: () -\u0026gt; 1.1 ; {} -\u0026gt; 1.05 ; [] -\u0026gt; 0.952 å¯ä»¥é€šè¿‡(())è¿›è¡Œå åŠ å³ 1.1*1.1\né¢å¤–æ¨¡å‹è°ƒå–ï¼šç¼–å†™æ ¼å¼ä¸º \u0026lt;lora:loramodelname:multiplier\u0026gt;ï¼Œå³è½½å…¥ loramodelname æ¨¡å‹ï¼Œæƒé‡ä¸º multiplierï¼Œè¯¥æƒé‡ä¸å»ºè®®è¿‡å¤§ã€‚\nå…³é”®è¯çš„åˆ‡æ¢ï¼š è¯­æ³•å¦‚ä¸‹ [key1:key2:step]ï¼Œé€šè¿‡è¯¥è¯­æ³•å¯ä»¥å®ç°åœ¨è¿›è¡Œåˆ°ä¸åŒæ­¥éª¤çš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„å…³é”®è¯è¿›è¡Œæ¸²æŸ“ï¼Œå…¶ä¸­ :key2 å¯ä»¥å¿½ç•¥ï¼Œå¿½ç•¥åå³å¯ç†è§£ä¸º [\u0026quot;\u0026quot;:key1:step]ï¼Œæœ‰ä¸€ä¸‹çš„ä¸€äº›è§„åˆ™ï¼š\nStep åœ¨å¤§äº 1 æ—¶è¡¨ç¤ºå…·ä½“çš„æ­¥éª¤ï¼Œå°äº 1 æ—¶è¡¨ç¤ºè¿­ä»£æ­¥æ•°çš„ç™¾åˆ†æ¯” å¦‚æœæƒ³è¦åœ¨æŸæ­¥ä¹‹åå¿½ç•¥ key1ï¼Œä¸ä¸Šé¢å¿½ç•¥ key2 æ­£å¥½ç›¸åï¼Œå¯ä»¥å†™æˆ [key1::step] [key1|key2] åˆ™è¡¨ç¤ºä¸¤ä¸ªå…³é”®è¯äº¤æ›¿é€‰æ‹©æ¸²æŸ“ åå‘æç¤ºè¯ï¼šåå‘æç¤ºè¯å°±æ˜¯è®© AI é¿å…ç”Ÿæˆä»€ä¹ˆæ ·çš„å›¾ç‰‡ï¼Œä½¿ç”¨å¾—å½“å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç”Ÿæˆæƒ³è¦çš„å›¾ç‰‡ï¼Œåé¢å†å…³é”®è¯çš„åœ°æ–¹ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„åå‘å…³é”®è¯ï¼Œä¾‹å¦‚ä½ç”»è´¨ç›¸å…³å’Œä¸€äº›å®¹æ˜“å˜å½¢èº«ä½“éƒ¨ä½çš„æè¿°ç­‰\nè¿™é‡Œä»‹ç»ä¸€ä¸ª easynegative çš„ embedding æ¨¡å‹ï¼Œå…¶æ˜¯é€šè¿‡å¤§é‡çš„ä¸å¥½çš„å›¾ç‰‡è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ï¼Œé€šè¿‡åœ¨åå‘å…³é”®è¯éƒ¨åˆ†è°ƒç”¨ easynegative è°ƒç”¨è¯¥æ¨¡å‹å³å¯è¿‡æ»¤ã€‚\nå…·ä½“çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š\né¦–å…ˆå» C ç«™ä¸‹è½½æ¨¡å‹ï¼Œ EasyNegative - EasyNegative | Stable Diffusion Textual Inversion | Civitai ; ç„¶åå°†å…¶æ”¾å…¥ stable-diffuison-webui èµ„æ–™å¤¹ä¸‹çš„ embeddings æ–‡ä»¶å¤¹ï¼›é‡å¯ä¹‹ååœ¨è´Ÿå‘å…³é”®è¯ä¸­å¡«å…¥ EasyNegative å³å¯ç”Ÿæ•ˆï¼ˆä¹Ÿå¯ä»é¢å¤–ç½‘ç»œä¸­é€‰æ‹© Textual inversion/tembedingï¼Œç„¶åå°†è¯¥æ¨¡å‹å¡«å…¥ Negative ä¸­ï¼‰\nä½†æ˜¯å•ç‹¬ä½¿ç”¨çš„è¯ï¼Œæ•ˆæœå¯èƒ½è¿˜æ˜¯æ²¡æœ‰é‚£ä¹ˆå¥½ï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯ç»“åˆç€ä¸€äº›ç‰¹å®šçš„è´Ÿå‘å…³é”®è¯ä¸€èµ·ä½¿ç”¨ã€‚\nKeyword å…³é”®è¯ è¯¥éƒ¨åˆ†ä¸»è¦æ¥è‡ªå‚è€ƒèµ„æ–™ï¼ŒåŸæ–‡æ¨è é˜…è¯»ï¼Œå¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™åŸæ–‡ç‚¹èµã€‚\né€šè¿‡åœ¨æ–‡ç« å‰é¢æ·»åŠ ç”»è´¨å…³é”®è¯èƒ½æå‡ç”Ÿæˆå›¾ç‰‡çš„è´¨æ„Ÿï¼Œè´¨é‡ï¼Œæè¿°ç®€å•é€šç”¨è€Œæœ‰æ•ˆ\nprompt Desc HDR, UHD, 8 k è¿™æ ·çš„è´¨é‡è¯å¯ä»¥å¸¦æ¥å·¨å¤§çš„å·®å¼‚æå‡ç…§ç‰‡çš„è´¨é‡ Best quality æœ€ä½³è´¨é‡ masterpiece æ°ä½œ Highly detailed ç»†èŠ‚æ·»åŠ  Studio lighting æ¼”æ’­å®¤ç¯å…‰ ultra-fine painting ç²¾ç»†ç»˜å›¾ sharp focus æ¸…æ™°èšç„¦ physically-based rendering åŸºäºç‰©ç†æ¸²æŸ“ extreme detail description è¯¦ç»†åˆ»ç”» Professional æ”¹å–„å›¾ç‰‡çš„å¯¹æ¯”ç»†èŠ‚ Vivid Colors è‰²å½©é²œè‰³ Bokeh æ¨¡ç³ŠèƒŒæ™¯ï¼Œçªå‡ºä¸»é¢˜ (EOS R8, 50mm, F1.2, 8K, RAW photo:1.2) ç›¸æœºè®¾ç½® High resolution scan å¹´ä»£æ„Ÿ Sketch ç´ æ Painting ç»˜ç”» è¿˜æœ‰ä¸€äº›è¯¸å¦‚ï¼šdepth of field æ™¯æ·±ã€wide angle å¹¿è§’ä¹‹ç±»æœ¯è¯­ï¼Œä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆæ›´å¥½çš„æˆ–è€…æ›´ç¬¦åˆé¢„æœŸçš„å›¾ç‰‡ã€‚\nå¯ä»¥é€šè¿‡æ·»åŠ è‰ºæœ¯å®¶å…³é”®è¯æ¥ä½¿å¾—ç”Ÿæˆå›¾ç‰‡å…·å¤‡ç‰¹å®šé£æ ¼ï¼Œå¸¸ç”¨äºå›ºå®šçš„é£æ ¼æ¨¡ä»¿ã€‚\nprompt Artist è‚–åƒç”»ï¼ˆPortraitsï¼‰ Derek Gores, Miles Aldridge, Jean Baptiste-Carpeaux, Anne-Louis Girodet é£æ™¯ç”»ï¼ˆLandscapeï¼‰ Alejandro Bursido, Jacques-Laurent Agasse, Andreas Achenbach, Cuno Amiet ææ€–ç”»ï¼ˆHorrorï¼‰ H.R.Giger, Tim Burton, Andy Fairhurst, Zdzislaw Beksinski åŠ¨æ¼«ç”»ï¼ˆAnimeï¼‰ Makoto Shinkai, Katsuhiro Otomo, Masashi Kishimoto, Kentaro Miura ç§‘å¹»ç”»ï¼ˆSci-fiï¼‰ Chesley Bonestell, Karel Thole, Jim Burns, Enki Bilal æ‘„å½±ï¼ˆPhotographyï¼‰ Ansel Adams, Ray Earnes, Peter Kemp, Ruth Bernhard æ¦‚å¿µè‰ºæœ¯å®¶ï¼ˆè§†é¢‘æ¸¸æˆï¼‰Concept artists video game Emerson Tung, Shaddy Safadi, Kentaro Miura å¸¸ç”¨çš„åå‘ Prompt å¸¸æœ‰å¦‚ä¸‹çš„è¿™äº›ï¼Œå®é™…ä¸Šå¯ä»¥æ ¹æ®ç”Ÿæˆçš„æƒ…å†µæ”¾ä¸Šå»ï¼Œæˆ–è€…æ ¹æ®éœ€è¦çš„å›¾ç‰‡ç›´æ¥ä¸€è‚¡è„‘çš„æ”¾ä¸Šå»å³å¯ï¼Œå¸Œæœ› AI ç”»å¥½ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡æ­£ tag ç»“åˆåå‘çš„çº¦æŸæ¥å®ç°ã€‚\nnegative prompt Desc mutated hands and fingers å˜å¼‚çš„æ‰‹å’Œæ‰‹æŒ‡ deformed å˜å½¢çš„ bad anatomy è§£å‰–ä¸è‰¯ disfigured æ¯å®¹ poorly drawn face è„¸ç”»çš„ä¸å¥½ mutated å˜å¼‚çš„ extra limb å¤šä½™çš„è‚¢ä½“ ugly ä¸‘é™‹ poorly drawn hands æ‰‹ç”»çš„ä¸å¥½ missing limb ç¼ºå°‘è‚¢ä½“ floating limb æ¼‚æµ®çš„å››è‚¢ disconnected limbs è‚¢ä½“ä¸è¿è´¯ malformed hands ç•¸å½¢çš„æ‰‹ out of focus è„±ç¦»ç„¦ç‚¹ long neck é•¿è„–å­ long body é•¿èº«ä½“ Sampleä¸€äº›ç®€å•æˆå“ \u003c!DOCTYPE html\u003e\rexam 1\rå‚è€ƒèµ„æ–™ Stable Diffusion prompt: a definitive guide - Stable Diffusion Art (stable-diffusion-art.com) ç¹ªåœ–AI - Stable Diffusion ç›¸é—œæ•™å­¸èˆ‡åƒè€ƒè³‡æº 202303 update - yoyojojoçš„å‰µä½œ - å·´å“ˆå§†ç‰¹ (gamer.com.tw) é­”å’’ç™¾ç§‘è¯å…¸ (aitag.top) AIç¹ªåœ–é­”å°æ›¸ - Google è¡¨æ ¼ https://majinai.art/zh-tw/index.php ","permalink":"https://metisy.cool/posts/stablediffusionprompt/","summary":"\u003cblockquote\u003e\n\u003cp\u003eè¯¥ç« èŠ‚ä¸»è¦åŒ…æ‹¬ Promot ç”Ÿæˆå’Œéƒ¨åˆ†å·¥ä½œæµçš„åˆ†æï¼Œæ—¨åœ¨äº†è§£å¦‚ä½•å†™å‡ºæ›´å¥½çš„å…³é”®è¯ï¼Œå¦‚ä½•ç”Ÿæˆæ›´å¥½çš„å›¾ç‰‡ï¼Œå½“æˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆæè¿°çš„æ—¶å€™ä¹Ÿå¯ä»¥å°†è¯¥å·¥ä½œäº¤ç»™ ChatGPTï¼Œè®©å…¶ä¸ºæˆ‘ä»¬æ”¥å†™ä¸€èˆ¬åŸºç¡€çš„æç¤ºè¯\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"prompt-ç¼–å†™èŒƒå¼\"\u003ePrompt ç¼–å†™èŒƒå¼\u003c/h2\u003e\n\u003cp\u003eå‚è€ƒèµ„æ–™ï¼š\u003ca href=\"https://zhuanlan.zhihu.com/p/619247417?utm_id=0\" target=\"_blank\" rel=\"noopener\"\u003eã€Stable Diffusionã€‘Prompt\u003c/a\u003e\n\u003c/p\u003e\n\u003cp\u003eé€šå¸¸ç¼–å†™å¯ä»¥éµç…§ä»¥ä¸‹çš„ç±»åˆ«è¿›è¡Œç»„ç»‡ï¼Œä¸»è¦æœ‰ \u003ccode\u003e\u0026lt;è´¨é‡æ§åˆ¶\u0026gt; + \u0026lt;å‰ç½®\u0026gt; + \u0026lt;ä¸»ä½“\u0026gt; + \u0026lt;åœºæ™¯è¯\u0026gt;\u003c/code\u003e å‡ ç±»ï¼Œå…¶ä¸­åˆ†åˆ«åŒ…æ‹¬ä»¥ä¸‹çš„å‡ ç±»è¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè´¨é‡æ§åˆ¶\u003c/strong\u003eï¼šç”»è´¨ã€é•œå¤´æ•ˆæœã€å…‰ç…§æ•ˆæœ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå‰ç½®è¯\u003c/strong\u003eï¼šç”»é£ã€è‰ºæœ¯å®¶ã€é£æ ¼\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸»ä½“\u003c/strong\u003eï¼šäººç‰©\u0026amp;å¯¹è±¡ã€å§¿åŠ¿ã€æœè£…ã€é“å…·\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåœºæ™¯\u003c/strong\u003eï¼šç¯å¢ƒã€èƒŒæ™¯ã€ç»†èŠ‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAdditional Network\u003c/strong\u003eï¼šè½½å…¥é¢å¤–æ¨¡å‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ†å‰²ç¬¦å·ï¼š\u003c/strong\u003e å„ä¸ªå…³é”®è¯ä¹‹é—´ç”¨ \u003ccode\u003e,\u003c/code\u003e åˆ†å‰²ï¼Œä¸”å¯¹åº”çš„æƒé‡ä»å‰åˆ°åä¾æ¬¡é€’å‡ï¼Œå› æ­¤åœ¨ç¼–å†™å…³é”®è¯çš„æ—¶å€™ä¹Ÿè¦æ³¨æ„å…ˆåé¡ºåºã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæƒé‡åŠ æƒç¬¦å·\u003c/strong\u003eï¼šå„ç§æ‹¬å·ä»£è¡¨å„ç§ä¸åŒçš„åŠ æƒç³»æ•°ï¼Œè¿™é‡Œå»ºè®®ç”¨ \u003ccode\u003e(prompt: weight)\u003c/code\u003e ç»Ÿä¸€æ¥ç¼–å†™æç¤ºè¯çš„æƒé‡è§„åˆ™ï¼Œæ•´ä½“å¯è¯»æ€§ä¼šæ›´å¥½ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™é‡Œçš„ weight æŒ‡çš„æ˜¯æƒé‡å˜æˆåŸæœ¬çš„ weight å€ï¼Œå°±å¯ä»¥è°ƒæ•´åŠ å¼ºæˆ–å‡å¼±ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå„ä¸ªæ‹¬å·çš„é»˜è®¤ç³»æ•°å¦‚ä¸‹: () -\u0026gt; 1.1 ; {} -\u0026gt; 1.05 ; \u003ccode\u003e[]\u003c/code\u003e -\u0026gt; 0.952\nå¯ä»¥é€šè¿‡(())è¿›è¡Œå åŠ å³ 1.1*1.1\u003c/p\u003e\n\u003c/blockquote\u003e","title":"AIGC04 Stable Diffusion Write Prompt Better"},{"content":"@AikenHong 2021\nCode of must of those methods We will analysis those tricks on LT situation, and Analysis why it works. åœ¨è¿›è¡ŒLTçŸ«æ­£çš„ä»»åŠ¡ä¸­ï¼Œæœ‰å‡ ç§å¸¸è§çš„trickåœ¨å„ç§æ¨¡å‹ä¸­è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¼šå¯¹è¿™å‡ ç§ä¸åŒçš„trickè¿›è¡Œä»‹ç»å’Œåˆ†æã€‚\nå…¶å®åœ¨æ•°æ®é‡å°‘è¿™ä¸€æ–¹é¢LTå’ŒFew-Shotæ˜¯æœ‰ä¸€å®šçš„OverLapçš„,å¯ä»¥å‚è€ƒä»¥ä¸‹é‚£è¾¹çš„æ€è·¯perhaps\nIntroduction é€šå¸¸æƒ…å†µä¸‹è¿™ç§ä¸¥é‡çš„ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ä¼šä½¿å¾—æ¨¡å‹ä¸¥é‡è¿‡æ‹Ÿåˆäºå¤´éƒ¨ï¼Œè€Œåœ¨å°¾éƒ¨æ¬ æ‹Ÿåˆ\né¦–å…ˆä»‹ç» bag of tricks è¿™ç¯‡è®ºæ–‡ä¸­æ€»ç»“äº†ä¸€äº›å¸¸ç”¨çš„Trickï¼Œå¹¶ç»„åˆå‡ºäº†æœ€ä½³çš„ä¸€å¥—trick\nç»è¿‡è¯¥æ–‡å®éªŒæ€»ç»“ï¼ŒTrickç»„åˆåº”è¯¥æ˜¯[1]`ï¼š\nåœ¨å‰å‡ ä¸ªepochåº”ç”¨input mixupæ•°æ®å¢å¼ºï¼Œç„¶ååé¢fine-tuning; (åŸºäºCAMçš„)é‡é‡‡æ ·æ¥é‡æ–°è®­ç»ƒåˆ†ç±»å™¨; å®é™…ä¸Šå°±æ˜¯MixUp + Two-Stageçš„ç­–ç•¥ï¼Œåç»­å¯¹Mix-upè¿™ä¸ªç­–ç•¥å¸¦æ¥çš„ä½œç”¨è¦è¿›è¡Œè¡¥å……äº†è§£ä¸€ä¸‹\nRebalance å¯¹äºReBalanceçš„æ–¹æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯ä» dataå’Œ updateä¸¤ä¸ªè§’åº¦æ¥ç¼“è§£Unbalanceæœ¬èº«ï¼Œé€šè¿‡ä»æ•°æ®é‡ä¸Šè¾¾åˆ°é‡æ–°å‡è¡¡ï¼Œæˆ–è€…åŸºäºLossä½¿å¾—bpè¿‡ç¨‹ä¸­èµ‹äºˆTailæ›´é«˜çš„æƒé‡æ¥è¾¾åˆ°ä¼˜åŒ–è¿‡ç¨‹çš„å¹³è¡¡ã€‚\nå‰è€…ç§°ä¸ºrebalanceï¼Œåè€…åˆ™ä¸ºreweight.\nreweighting è¿™ä¸€éƒ¨åˆ†åœ¨å®é™…è®¾è®¡ä¸Šçš„ä½“ç°ä¸»è¦æ˜¯é€šè¿‡å¯¹Lossçš„é‡æ–°æ„é€ è€Œæˆï¼Œé€šè¿‡å¯¹Lossçš„æ„é€ æ¥å®ç°åŒºåˆ†çš„BPæƒé‡.\nä»£ä»·æ•æ„Ÿsoftmaxäº¤å‰ç†µæŸå¤±CS_CE: åœ¨ceå‰ä¹˜æœ€å°è®­ç»ƒå›¾åƒæ•°ç›®ä¸æ¯ä¸ªç±»åˆ«å›¾åƒæ•°ç›®çš„æ¯”å€¼ï¼Œç›¸å½“äºæ›´æ³¨é‡å°‘ç±»æ ·æœ¬ $$ \\mathcal{L}{CS_CE}(\\mathbf{z}, c)=-\\frac{n{\\min }}{n_{c}} \\log \\left(\\frac{\\exp \\left(z_{c}\\right)}{\\sum_{i=1}^{C} \\exp \\left(z_{i}\\right)}\\right) $$\nFocal Lossï¼šè®¾ç½®$\\alpha$ å’Œ $\\beta$æ¥æ§åˆ¶å°‘æ•°ç±»å’Œéš¾åˆ†ç±»åˆ«å¯¹æŸå¤±çš„è´¡çŒ®ï¼š $$\\mathcal{L}{\\text {Focal }}(\\mathbf{z}, c)=-\\sum{i=1}^{C}\\left(1-p_{i}^{t}\\right)^{\\gamma} \\log \\left(p_{i}^{t}\\right)$$\nç±»åˆ«å¹³è¡¡æŸå¤±ï¼šå°±æ˜¯åœ¨åŸºæœ¬çš„æŸå¤±ï¼ˆCEï¼ŒFOCALï¼‰å‰åŠ å…¥ä¸€ä¸ªè¡¡é‡æƒé‡ï¼Œå…¶ä¸­$\\beta$æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œæ¥è¡¡é‡æœ‰æ•ˆçš„ä¿¡æ¯ $$\\mathcal{L}{CB_Focal}(\\mathbf{z}, c)=-\\frac{1-\\beta}{1-\\beta^{n{c}}} \\sum_{i=1}^{C}\\left(1-p_{i}^{t}\\right)^{\\gamma} \\log \\left(p_{i}^{t}\\right)$$\nLogit Abjustment[3]: $$\\ell(y, f(x))=\\alpha_{y} \\cdot \\log \\left[1+\\sum_{y^{\\prime} \\neq y} e^{\\Delta_{y y^{\\prime}}} \\cdot e^{\\left(f_{y^{\\prime}}(x)-f_{y}(x)\\right)}\\right]$$\nrebalance å®é™…ä¸Šå°±æ˜¯å¯¹å°‘ç±»æˆ–è€…å¤šç±»çš„æ•°æ®é‡æ–°åšå‡è¡¡ï¼Œæ–¹æ³•çš„æœ¬è´¨å·®åˆ«ä¸€èˆ¬éƒ½ä¸æ˜¯ç‰¹åˆ«å¤§\néšæœºè¿‡é‡‡æ ·ï¼šéšå³é‡å¤å°‘æ•°ç±»åˆ«çš„æ ·æœ¬æ¥ä½¿å¾—æ ·æœ¬å‡è¡¡ éšæœºé™é‡‡æ ·ï¼šéšæœºåˆ é™¤å¤šæ•°ç±»åˆ«çš„æ ·æœ¬ä½¿å¾—æ ·æœ¬å‡è¡¡ æ ·æœ¬å¹³è¡¡é‡‡æ ·ï¼šåº”è¯¥å€¼å¾—å°±æ˜¯1-2 IB-Sampling ç±»åˆ«å¹³å‡é‡‡æ ·: å¯¹ç±»åˆ«è¿›è¡Œç»Ÿä¸€é‡‡æ ·ï¼Œæ¯ä¸ªç±»åˆ«è¢«é‡‡æ ·çš„æ¦‚ç‡éƒ½ä¸€æ ·(Q=0)ï¼Œç„¶åä»æ¯ä¸ªç±»åˆ«ä¸­æœ‰æ”¾å›çš„éšæœºé‡‡æ ·å®ä¾‹ï¼Œä»è€Œæ„å»ºå¹³è¡¡çš„æ•°æ®é›† $$p_j = \\frac{n_j^q}{\\sum_{i=1}^C n_i^q}$$ å¹³æ–¹æ ¹é‡‡æ ·(Q=0.5) é€æ­¥å¹³è¡¡é‡‡æ ·ï¼šå…ˆå¯¹å¤šä¸ªepochè¿›è¡Œå®ä¾‹å¹³è¡¡é‡‡æ ·ï¼ˆä¸Šå¼q=1ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä»»ä½•å¹³è¡¡æ“ä½œçš„é‡‡æ ·ï¼‰ï¼Œç„¶åå†å‰©ä¸‹çš„epochesä¸­è¿›è¡Œç±»åˆ«å¹³è¡¡é‡‡æ ·ã€‚è¿™ç§é‡‡æ ·æ–¹å¼éœ€è¦è®¾ç½®ä¸€ä¸ªè¶…å‚æ•°æ¥è°ƒæ•´ä»å“ªä¸€ä¸ªepochå¼€å§‹å˜æ¢é‡‡æ ·æ–¹å¼ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´è½¯çš„é˜ˆå€¼ï¼Œå³éšç€epochçš„å¢åŠ æ¥é€æ¸è°ƒæ•´å®ä¾‹å¹³è¡¡é‡‡æ ·ï¼ˆIBï¼‰å’Œç±»åˆ«å¹³è¡¡é‡‡æ ·æ‰€å çš„æ¯”ä¾‹ï¼Œå¦‚ä¸‹é¢å…¬å¼æ‰€ç¤ºã€‚ $$ P_j^{PB} (t) = (1-\\frac{t}{T})P_j^{IB} + \\frac{t}{T}P_j^{CB} $$\ntwo-stage åœ¨Unbalancedçš„Dataä¸ŠPretrainä¸€ä¸ªç‰¹å¾æå–å™¨ï¼Œç„¶åå†rebalanceï¼ˆIBï¼ŒCBï¼‰çš„æ•°æ®é›†ä¸Šå¯¹Classifierè¿›è¡Œé‡æ–°è®­ç»ƒï¼ˆè°ƒæ•´ï¼‰ï¼Œï¼ˆand | orï¼‰å¯¹é½ï¼Œæ ¡å‡†ï¼ˆdisalignï¼Œcausalï¼‰æ¥æå‡LTçš„æ€§èƒ½çš„æ–¹æ³•\nmotivation ä½†æ˜¯è¿™äº›rebalanceçš„æ–¹æ³•é€šå¸¸ä¼šå¸¦æ¥ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜[2]ï¼š\nrebalanceä¹‹ååˆ†ç±»å™¨ä¼šå€¾å‘äºåˆ†ç±»æ­£ç¡®çš„å°¾éƒ¨æ ·æœ¬ï¼Œå¯¼è‡´å¯¹äºå¤´éƒ¨æœ‰ä¸€å®šçš„bad influenceï¼ˆæ¬ æ‹Ÿåˆï¼‰ï¼Œå¯¹å°¾éƒ¨è¿‡æ‹Ÿåˆ rebalanceæ–¹æ³•ä¼šæ˜¾è‘—çš„ä¿ƒè¿›åˆ†ç±»å™¨çš„å­¦ä¹ ï¼Œä½†æ˜¯ä¼šæŸå®³æ·±åº¦ç‰¹å¾çš„è¡¨ç¤ºèƒ½åŠ›ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåˆ†ç±»å™¨å­¦åˆ°çš„åˆ†ç•Œé¢æ›´å¥½ï¼Œä½†æ˜¯ç‰¹å¾çš„è¡¨ç¤ºå´æ›´åŠ çš„æ¾æ•£äº† æˆ‘è®¤ä¸ºrebalanceçš„ç­–ç•¥ç¡®å®ä¼šä½¿å¾—Clfå­¦çš„æ›´å¥½çš„åˆ†ç•Œé¢ï¼Œå‡å°‘åå‘æ€§ï¼Œä½†æ˜¯ä¸è‡³äºåœ¨å°¾éƒ¨è¿‡æ‹Ÿåˆï¼Œè¿™ä¸€éƒ¨åˆ†åˆ†ææœ€é‡è¦çš„åº”è¯¥æ˜¯rebalanceå¯¹äºç‰¹å¾ç©ºé—´çš„Bad Influenceï¼Œè¿™å¯èƒ½å°±æ˜¯Two Stageçš„æ¥æºã€‚\näºæ˜¯ä½œè€…ä¸ºå…¶è®¾è®¡äº†ä¸€äº›æ¶ˆèå®éªŒï¼šCEæŒ‡çš„æ˜¯é•¿å°¾ï¼ŒRWï¼ŒRSæŒ‡çš„æ˜¯ä½¿ç”¨çš„rebalanceçš„æ•°æ®ã€‚\nå¯ä»¥å‘ç°åœ¨Backboneä¸Šä½¿ç”¨Unbalanceçš„æ•°æ®è€Œåœ¨Clfä¸Šä½¿ç”¨Resamplerçš„æ•°æ®æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œè¿™ç§two-stageçš„è§£è€¦ä¸¤é˜¶æ®µçš„è®­ç»ƒç­–ç•¥å±•ç°äº†ä¸€ä¸ªæœ‰å¸Œæœ›çš„ç»“æœã€‚\nè¿™ç§ä¸¤é˜¶æ®µçš„æ–¹å¼ï¼Œæˆ‘è®¤ä¸ºåœ¨ç¬¬äºŒé˜¶æ®µçš„æ—¶å€™ä¹Ÿè¦å¯¹ç‰¹å¾è¿›è¡Œå¾®è°ƒæ¥é€‚åº”å½“å‰çš„åˆ†å¸ƒï¼Œä¸è¿‡å¾ˆå¤šçš„æ–¹æ³•éƒ½æ˜¯ç›´æ¥åªå¯¹åˆ†ç±»å™¨è¿›è¡Œè°ƒæ•´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¸¤ç§æ–¹å¼è¿›è¡Œæµ‹è¯•\nä¸‹å›¾æ˜¾ç¤ºäº†fix-two-stageå’Œbaselineå¯¹æ¯”[5] ä¸‹å›¾å±•ç¤ºäº†ç†æƒ³çš„two-stageç»“æœä¸æ˜¾ç¤ºæ–¹æ³•ä¹‹é—´çš„è·ç¦»[5] cls-boundæ˜¯å†fixç‰¹å¾åï¼Œç”¨å®Œå…¨å‡è¡¡çš„æ•°æ®é›†è®­ç»ƒåˆ†ç±»å™¨å¾—åˆ°çš„ç»“æœï¼Œç”±æ­¤å¸¦å…¥ç¬¬äºŒå¼ å›¾çš„ç»¿è‰²çš„çº¿ï¼Œå¯ä»¥çŸ¥é“ï¼Œç°æœ‰é•¿å°¾æ–¹æ³•çš„æ€§èƒ½ç“¶é¢ˆï¼ˆæœªä½¿ç”¨two-stageï¼‰ï¼Œä»ç„¶åœ¨ç‰¹å¾ç©ºé—´ä¸­çš„æœ‰åå·®çš„å†³ç­–è¾¹ç•Œã€‚ åŸºäºè¿™äº›åˆ†æ,æˆ‘ä»¬è®¤ä¸ºï¼Œåœ¨å¾—åˆ°ä¸€ä¸ªå¼ºæœ‰åŠ›çš„ç‰¹å¾è¡¨ç¤ºåï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜å½’åŒ–åˆ°åˆ†ç±»å™¨ä¸Šï¼ŒåŸºäºè¿™ç‚¹å‡è®¾ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆæˆ‘ä»¬çš„è‡ªç›‘ç£æ¨¡å—æ¥å¯¹è¯¥æ–¹æ³•è¿›è¡Œå½’åŒ–ã€‚\nBBN structure Share Weight of Backboneï¼ŒUsing diff dataset to get diff feature. Then we using $\\alpha$ to Combine the logits and calculate the loss.\n$$ z = \\alpha * W_c^T * f_c + (1-\\alpha) * W_\\gamma^T * f_\\gamma $$\n$$ L = \\alpha * l(softmax(z),y_c) + (1-\\alpha) *l(softmax(z),y_\\gamma) $$\nåœ¨ä¸Šè¿°çš„æµç¨‹å›¾ä¸­Wä»£è¡¨çš„æ˜¯ä¸¤ä¸ªä¸ä¸€æ ·çš„æ•°æ®ä¼˜åŒ–å™¨ï¼ŒåŸºäºè¿™æ ·çš„è®¾ç½®æœ€ç»ˆå°±èƒ½åŒºåˆ†ä¸¤éƒ¨åˆ†çš„ä¼˜åŒ–ã€‚\nä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸ºæˆ‘ä»¬å¸¦æ¥çš„æœ€å¤§çš„å¯å‘è¿˜æ˜¯åœ¨äºåŒºåˆ†ä¸¤é˜¶æ®µä¸­å­¦ä¹ çš„é‡ç‚¹ï¼Œbackboneéœ€è¦åœ¨ä¸€ä¸ªunblanceçš„æ¡ä»¶ä¸‹å­¦ä¹ ä¸€ä¸ªæ›´ä¸ºé€šç”¨çš„è¡¨å¾ï¼Œè€ŒClséœ€è¦çŸ«æ­£åå·®ã€‚ä¸å¹³è¡¡çš„æƒ…å†µä¸‹å¯èƒ½èƒ½å­¦åˆ°ä¸€ä¸ªå¾ˆå¥½çš„é€šç”¨è¡¨å¾ï¼Œè¿™ä¸€ç‚¹å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨è‡ªç›‘ç£çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚\nDecoupling ==Train BB and Fixed then Train CLF== æ­¤å¤–åç€å‘ç°å…¨è¿æ¥çš„weightå’Œnormå’Œå¯¹åº”ç±»åˆ«çš„æ ·æœ¬æ•°æ­£ç›¸å…³ï¼Œæ‰€ä»¥åœ¨ç¬¬äºŒéƒ¨æœ€åå°†åˆ†ç±»å™¨æ”¹ä¸ºå½’ä¸€åŒ–çš„åˆ†ç±»å™¨ï¼Œæ–‡ä¸­çš„ä¸¤ç§è®¾è®¡æ˜¯ï¼š\n$\\overline{W_i}=\\frac{w_i}{\\lVert W_i \\rVert^T}$ $\\overline{W_i}=\\frac{w_i}{f_i}$ å…¶ä¸­2åˆ©ç”¨fixedç¬¬ä¸€æ­¥åˆ†ç±»æƒé‡$w_i$,å¯¹æ¯ä¸ªç±»å­¦ä¹ äº†ä¸€ä¸ªåŠ æƒå‚æ•°$f_i$\nbetter-calibration ä½†æ˜¯è¿™ç§ä¸¤é˜¶æ®µçš„æ–¹å¼ä¹Ÿä¸æ˜¯æ²¡æœ‰ä»£ä»·çš„ï¼Œä»–ä¼šå¸¦æ¥æ¯”è¾ƒä¸¥é‡çš„æ ¡å‡†é”™è¯¯(Calibration)ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é¢„æµ‹çš„æ¦‚ç‡å’Œå®é™…çš„ç›¸ä¼¼åº¦ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚\nï¼ˆBTWè¯„ä¼°æ ¡å‡†é”™è¯¯çš„æŒ‡æ ‡ $ECE=\\sum_{b=1}^B\\frac{|S_b|}{N} |acc(S_b) - conf(S_b)|$ï¼Œå°†æ•°æ®åˆ†ä¸ºbç»„ï¼ŒS_bæ˜¯è½å…¥båŒºé—´çš„æ ·æœ¬é›†åˆ)\næœ¬æ–‡ä¸»è¦æµ‹è¯•äº†MixUPåœ¨ä¸¤é˜¶æ®µè®­ç»ƒä¸­çš„ä½œç”¨ï¼Œä»¥åŠæå‡ºäº†ï¼š\næ ‡ç­¾æ„ŸçŸ¥å¹³æ»‘æŸå¤±ï¼Œå®é™…ä¸Šå°±æ˜¯cb_ceçš„åŠæ³›åŒ–å½¢å¼ï¼š $$\\begin{gathered} l(\\boldsymbol{q}, \\boldsymbol{p})=-\\sum_{i=1}^{K} \\boldsymbol{q}{i} \\log \\boldsymbol{p}{i} \\ \\boldsymbol{q}{i}= \\begin{cases}1-\\epsilon{y}=1-f\\left(N_{y}\\right), \u0026amp; i=y \\ \\frac{\\epsilon_{y}}{K-1}=\\frac{f\\left(N_{y}\\right)}{K-1}, \u0026amp; \\text { Otherwise }\\end{cases} \\end{gathered}$$\n$\\epsilon_y$æ˜¯y(gt)çš„ä¸€ä¸ªå°å¹³æ»‘å› å­,æ•°ç›®ä¸ç±»åˆ«çš„æ ·æœ¬æ•°æœ‰å…³ï¼Œå¹¶æå‡ºäº†å‡ ç§å‡½æ•°å½¢å¼ï¼Œæ¥ä¼˜åŒ–è¿™ä¸ªæŸå¤±\nBNçš„ç§»ä½å­¦ä¹ ï¼Œç”±äºä¸¤é˜¶æ®µçš„æ•°æ®é›†ä¸ä¸€è‡´ï¼Œæ‰€ä»¥normalizeçš„å‚æ•°æ˜¯éœ€è¦å­¦ä¹ å˜åŒ–çš„ï¼ˆå‡å€¼å’Œæ–¹å·®ï¼‰\nå…·ä½“çš„æ•°å­¦åˆ†æå’Œæ¨å¯¼ï¼Œåç»­æ ¹æ®è®ºæ–‡ç†è§£äº†å†æ¥è¡¥å……\nDisAlign åŸºäºä¸Šè¿°å¯¹äºæ–¹æ³•çš„åˆ†æï¼Œè¯¥æ–‡ç« ç€é‡äºå¯¹äºåˆ†ç±»å™¨è¿›è¡Œæ ¡å‡†ï¼Œå…·ä½“çš„æ€è·¯æ˜¯åŸºäºåˆ©äºå¹³è¡¡é¢„æµ‹çš„ç±»åˆ«åˆ†å¸ƒæ¥å¯¹åˆ†ç±»å™¨çš„è¾“å‡ºè¿›è¡ŒåŒ¹é…ï¼ŒçŸ«æ­£ï¼›ç®€å•çš„è¯´åˆ©ç”¨ç±»åˆ«å…ˆéªŒå’Œè¾“å…¥æ•°æ®å­¦ä¹ ç±»åˆ«çš„å†³ç­–è¾¹ç•Œã€‚ å…·ä½“ç”±ä¸¤éƒ¨åˆ†æ„æˆ(é‡æ„é¢„æµ‹çš„æ¦‚ç‡è¾“å‡ºï¼Œå»ºç«‹ç†æƒ³åˆ†å¸ƒï¼Œä½¿ç”¨KLæ•£åº¦è®¡ç®—æŸå¤±)\nè‡ªé€‚åº”é…å‡†å‡½æ•° $$\\begin{gathered} s_{j}=\\alpha_{j} \\cdot z_{j}^{o}+\\beta_{j}, \\quad \\forall j \\in \\mathcal{C} \\ \\hat{z}{j}=\\sigma(\\mathbf{x}) \\cdot s{j}+(1-\\sigma(\\mathbf{x})) \\cdot z_{j}^{o} \\ =\\left(1+\\sigma(\\mathbf{x}) \\alpha_{j}\\right) \\cdot z_{j}^{o}+\\sigma(\\mathbf{x}) \\cdot \\beta_{j} \\ p_{m}(y=j \\mid \\mathbf{x})=\\frac{\\exp \\left(\\hat{z}{j}\\right)}{\\sum{k=1}^{C} \\exp \\left(\\hat{z}_{k}\\right)} \\end{gathered}$$\nå¹¿ä¹‰é‡åŠ æƒæ ¡å‡† ç†æƒ³çš„åˆ†å¸ƒçš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼Œå®šä¹‰è¯´çš„ä¸æ˜¯å¾ˆå¥½ï¼Œæœ€å¥½è¿˜æ˜¯å‚è€ƒä¸€ä¸‹ä»£ç  $$\\begin{gathered} p_{r}\\left(y=c \\mid \\mathbf{x}{i}\\right)=w{c} \\cdot \\delta_{c}\\left(y_{i}\\right), \\quad \\forall c \\in \\mathcal{C} \\ w_{c}=\\frac{\\left(1 / r_{c}\\right)^{\\rho}}{\\sum_{k=1}^{K}\\left(1 / r_{k}\\right)^{\\rho}}, \\quad \\forall c \\in \\mathcal{C} \\end{gathered}$$\næœ€ç»ˆçš„æŸå¤±è®¡ç®—æ–¹ç¨‹å¦‚ä¸‹ï¼š $$ \\begin{aligned} \\mathcal{L} \u0026amp;=\\mathbb{E}{\\mathcal{D}{t r}}\\left[\\mathcal{K} \\mathcal{L}\\left(p_{r}(y \\mid \\mathbf{x}) | p_{m}(y \\mid \\mathbf{x})\\right)\\right] \\ \u0026amp; \\approx-\\frac{1}{N} \\sum_{i=1}^{N}\\left[\\sum_{y \\in \\mathcal{C}} p_{r}\\left(y \\mid \\mathbf{x}{i}\\right) \\log \\left(p{m}\\left(y \\mid \\mathbf{x}_{i}\\right)\\right)\\right]+C \\end{aligned} $$\n==è®­ç»ƒçš„å…·ä½“ç­–ç•¥== 1ï¼‰åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œåœ¨ä¸å¹³è¡¡æ•°æ®é›†ä¸Šä½¿ç”¨å®ä¾‹å¹³è¡¡ ( instance-balanced ) é‡‡æ ·ç­–ç•¥å®ç°ç‰¹å¾æå–å™¨å’ŒåŸå§‹åˆ†ç±»å¤´çš„è”åˆå­¦ä¹ ã€‚æ­¤æ—¶ç”±äºä¸å¹³è¡¡çš„æ•°æ®åˆ†å¸ƒï¼Œå­¦ä¹ åˆ°çš„åŸå§‹åˆ†ç±»å¤´æ˜¯ä¸¥é‡æœ‰åçš„ã€‚\n2ï¼‰åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬åœ¨ç‰¹å¾æå–å™¨å‚æ•°å›ºå®šä¸å˜çš„æƒ…å†µä¸‹å…³æ³¨åˆ†ç±»å¤´ä»¥è°ƒæ•´å†³ç­–è¾¹ç•Œï¼Œå¼•å…¥äº†è‡ªé€‚åº”é…å‡†å‡½æ•° ( adaptive calibration function ) å’Œå¹¿ä¹‰é‡åŠ æƒ ( generalized re-weight ) ç­–ç•¥æ¥é…å‡†å„ç±»æ¦‚ç‡ã€‚\nCaucal Analysis åŸºäºtwo-stageçš„è¿™ç§ç°è±¡ï¼Œç„¶ååˆ†ææœºå™¨å’Œäººå­¦ä¹ çš„åŒºåˆ«ï¼Œè®¤ä¸ºå¸¦æ¥åå·®çš„å…ƒå‡¶åœ¨äºOptimä¼˜åŒ–ç®—æ³•ï¼Œä¸ºæ­¤ï¼Œè¯¥æ–‡ç« æ„å»ºå› æœå›¾ï¼Œä»è€Œå»é™¤åœ¨æ¨¡å‹æ›´æ–°è¿‡ç¨‹ä¸­ç”±åŠ¨é‡å¸¦æ¥çš„åå·®æ•ˆåº”ã€‚\n\"keep good and remove bad momentum\"[7]\r$v_t = \\mu Â· v_{t-1} + g_t$, $\\theta = \\theta_{t-1} - lr Â· v_t$\nè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œæˆ‘ä»¬å°±éœ€è¦\nå°†è®­ç»ƒçš„CLFä¿®æ”¹æˆMulti-Headå¹¶Normlizeï¼Œå‚è€ƒDecouple. è®­ç»ƒè¿‡ç¨‹ä¸­ç»Ÿè®¡ç§»åŠ¨å¹³å±€ç‰¹å¾$\\overline{x}$ï¼Œå°†å…¶å•ä½æ–¹å‘çœ‹æˆå¤´éƒ¨å€¾å‘. æµ‹è¯•çš„è¿‡ç¨‹ä¸­ä¿®æ­£logitså³å¯ å…·ä½“å…¬å¼å‚è€ƒå¯¹åº”çš„è§£æå’Œä»£ç å®ç°;\nå’Œè‡ªç›‘ç£ç»“åˆçš„è¯ï¼Œåªéœ€è¦åœ¨å¾®è°ƒçš„é˜¶æ®µè¿›è¡Œç»Ÿè®¡å’Œä¿®æ­£å³å¯ï¼Œæ¯•ç«Ÿæ˜¯ä¸€ä¸ªä¸€é˜¶æ®µçš„æ–¹å¼ã€‚\nContrastive è¿™ä¸€éƒ¨åˆ†è€ƒè™‘ä¸€äº›å’Œå¯¹æ¯”å­¦ä¹ ï¼Œæˆ–è€…è¯´è‡ªç›‘ç£å­¦ä¹ è€¦åˆçš„æ–¹æ³•æ¥è¿›è¡Œåˆ†æã€‚\nä¸ºä½•å°†è¿™ä¸¤è€…æ”¾åˆ°åŒä¸€ä¸ªç« èŠ‚ä¸­ï¼Ÿ å› ä¸ºè¿™ä¸¤è€…ä¼å›¾ä»è¡¨å¾çš„å±‚é¢ï¼Œä¸ºLTä»»åŠ¡ï¼Œå¸¦æ¥å¢ç›Šï¼Œå¾—åˆ°ä¸€ä¸ªå¯åˆ†çš„ç‰¹å¾ç©ºé—´åŸºäºè‰¯å¥½çš„ç‰¹å¾è¡¨è¾¾ï¼Œè¿›è€Œè§£è€¦çš„æ¥è®­ç»ƒä¸€ä¸ªæ›´å¥½çš„CLFã€‚\nå¦‚æœæˆ‘ä»¬å‡è®¾æˆ‘ä»¬èƒ½å¾—åˆ°ä¸€ä¸ªé«˜ç»´çº¿æ€§å¯åˆ†çš„ç‰¹å¾ç©ºé—´ï¼Œå¯¹äºé•¿å°¾çš„æ ·æœ¬å¸¦æ¥çš„è®­ç»ƒåå·®ï¼ˆå†³ç­–é¢åå·®ï¼‰æ˜¯å¦å¯ä»¥é€šè¿‡å¯¹äºç‰¹å®šç±»åˆ«çš„Margin-Likeçš„Lossè®¾ç½®ï¼Œè¾¾åˆ°ä¸€ä¸ªç±»ä¼¼Balanceçš„æ•ˆæœï¼Œè¿™ä¸€ç‚¹ä¸Šå®é™…ä¸Šå¯èƒ½å’ŒAlignå’Œæ ¡æ­£çš„æ€æƒ³æœ‰ç‚¹ç›¸ä¼¼ã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯ä¸ºäº†è®©åˆ†ç±»å™¨ç©ºé—´ä¸­çš„åˆ†ç•Œé¢åœ¨å°æ ·æœ¬çš„æŸç¼šä¸‹å˜å¾—æ›´åŠ çš„åˆç†ã€‚\nä»åˆ†ç•Œé¢çš„è§’åº¦çœ‹LTçš„æƒ…å†µï¼šï¼ˆä¸Šé¢æ˜¯æ™®é€šCEï¼Œä¸‹é¢æ˜¯Contrastive Learningï¼‰ åœ¨æ•°æ®é‡å‡ºç°è¾ƒå¤§çš„å·®å¼‚çš„æƒ…å†µä¸‹ï¼Œç”±äºè“è‰²çš„æ•°ç›®æ›´å¤šæ›´æ‚ï¼Œæ‰€ä»¥å®é™…ä¸Šåˆ†ç•Œé¢å¯èƒ½ä¼šæ²¿ç€è“è‰²æ•°æ®çš„è¾¹ç•Œåšåˆ‡åˆ†ï¼ˆoverfitï¼‰ï¼Œåœ¨è¿™ç§Class-Levelçš„è¿‡æ‹Ÿåˆä¸‹ï¼Œå°±ä¼šå¯¼è‡´å¯¹äºå°‘æ•°ç±»åˆ«çš„åˆ†ç±»ç»“æœå¾ˆå·®ã€‚\nè€Œä¸‹æ–¹çš„å¯¹æ¯”å­¦ä¹ å°±æ˜¯ä¸€æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œä»–è¯•å›¾å°†åŒä¸€ç±»çš„æ•°æ®èšæ‹¢åœ¨ä¸€èµ·ï¼Œå°†ä¸åŒç±»çš„è·ç¦»å°½å¯èƒ½çš„æ‹‰è¿œï¼Œè¿™æ ·ä¼šä½¿å¾—åœ¨ç©ºé—´ä¸­çš„å†³ç­–é¢æ›´åŠ çš„é²æ£’ä¹Ÿå·²äºåŒºåˆ†ï¼Œè™½ç„¶å¯èƒ½ä¼šä¸€å®šç¨‹åº¦ä¸Šå‡å°‘è“è‰²çš„è¡¨ç°ï¼Œä½†æ˜¯çº¢è‰²çš„è¡¨ç°ä¼šå› æ­¤å¤§å¤§çš„æå‡ã€‚\nhybird contrastive è¯¥æ–‡ç« [9]çš„åŸºæœ¬æ¶æ„ä¸Šå®é™…ä¸Šå‚è€ƒçš„å°±æ˜¯BBNçš„epoch-paramsåœ¨two-stageä¸­é›†æˆ supervised contrasive Lossï¼Œå…·ä½“æ¡†æ¶å¯ä»¥çœ‹ä¸‹é¢è¿™å›¾ï¼š ä»–çš„è®¾è®¡æ€æƒ³å¾ˆå®¹æ˜“ä»è¿™å¼ å›¾ä¸­é¢†ä¼šï¼ŒæŸå¤±å‡½æ•°çš„è¡¨è¾¾æ˜¾ç„¶å¦‚ä¸‹\n$$ L_{hybird} = \\alpha Â· L_{SCL}(B_{SC}) + (1-\\alpha) Â· L_{ce}(B_{CE}) $$\nåœ¨è¿™é‡Œè¦æ³¨æ„SCå’Œè‡ªç›‘ç£ä¸­ä½¿ç”¨çš„åŒºåˆ«åœ¨äºï¼Œè‡ªç›‘ç£å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ²¡æœ‰æ ‡ç­¾ï¼Œæ‰€ä»¥åªèƒ½å°†è‡ªå·±ä½œä¸ºPositiveï¼Œè€Œåœ¨SCçš„æ—¶å€™ï¼ŒåŒç±»çš„æ ·æœ¬ä¹‹é—´åº”è¯¥éƒ½ä½œä¸ºPositive $$ \\mathcal{L}{S C L}\\left(\\mathbf{z}{i}\\right)=\\frac{-1}{\\left|\\left{\\mathbf{z}{i}^{+}\\right}\\right|} \\sum{\\mathbf{z}{j} \\in\\left{\\mathbf{z}{i}^{+}\\right}} \\log \\frac{\\exp \\left(\\mathbf{z}{i} \\cdot \\mathbf{z}{j} / \\tau\\right)}{\\sum_{\\mathbf{z}{k}, k \\neq i} \\exp \\left(\\mathbf{z}{i} \\cdot \\mathbf{z}_{k} / \\tau\\right)} $$\né‰´äºSCçš„è®¡ç®—å¤æ‚åº¦è¦å’Œæ•´ä¸ªEpochçš„æ•°æ®è¿›è¡Œå¯¹æ¯”ï¼Œéœ€è¦å¤§é‡çš„æ˜¾å­˜ç©ºé—´ï¼Œåœ¨è¿™æ–¹é¢ä½œè€…å°†å…¶æ”¹è¿›ä¸ºPSCï¼Œå…¶å®ä¹Ÿå°±æ˜¯å°†æ¯ä¸ªclassè®¡ç®—ä¸€ä¸ªprototypeï¼Œç„¶ååŸºäºåŸå‹å»è®¡ç®—è¿™ä¸ªç›¸ä¼¼æ€§æŸå¤± $$ \\mathcal{L}{P S C}\\left(\\mathbf{z}{i}\\right)=-\\log \\frac{\\exp \\left(\\mathbf{z}{i} \\cdot \\mathbf{p}{y_{i}} / \\tau\\right)}{\\sum_{j=1, j \\neq y_{i}}^{C} \\exp \\left(\\mathbf{z}{i} \\cdot \\mathbf{p}{j} / \\tau\\right)} $$ åœ¨è¿™é‡Œè¿™ä¸ªPrototypicaléœ€è¦æ­£åˆ™åŒ–åˆ°å•ä½å…ƒä¸­ï¼Œè¿™æ ·èƒ½å¿«é€Ÿè®¡ç®—ç›¸ä¼¼æ€§æŸå¤±ï¼Œä¹Ÿä¸ä¼šéœ€è¦å¤§é‡çš„ç°å­˜ã€‚\nå¯ä»¥å‚è€ƒçš„ç‚¹ä¸»è¦å°±åœ¨äºæŸå¤±çš„è®¾è®¡å’Œæ¡†æ¶ä¸Šçš„è¿™ç§åˆ†epochæœºåˆ¶äº†ï¼Œä½†æ˜¯åŸºäºè‡ªç›‘ç£çš„æ–¹å¼çš„è¯ï¼Œå¯èƒ½ä¸æ˜¯å¾ˆç”¨çš„ä¸Šè¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ€ä¹ˆç»“åˆè¿™ä¸ªlosså»åšå¯¹åº”çš„åˆ†ç±»å™¨ã€‚\nThe value of labels è¿™ä¸€ç¯‡æ–‡ç« æ˜¯å°†è‡ªç›‘ç£å­¦ä¹ å’ŒåŠç›‘ç£å­¦ä¹ åº”ç”¨åˆ°é•¿å°¾åˆ†å¸ƒçš„é—®é¢˜ä¸Šï¼Œæ–‡ç« å¯¹åº”çš„ä»“åº“ä¸­å¯ä»¥geté¢„è®­ç»ƒæ¨¡å‹å’Œå¾ˆå¤šå¯¹åº”çš„æ•°æ®ï¼ŒåŒæ—¶éªŒè¯äº†ä¸‹é¢ä¸¤ç§ç­–ç•¥éƒ½å¯ä»¥å¤§å¤§æå‡æ¨¡å‹çš„æ•ˆæœï¼ŒåŒ…æ‹¬å’Œä¹‹å‰çš„å„ç§ç­–ç•¥è¿›è¡Œè€¦åˆã€‚\nåŠç›‘ç£ï¼šåˆ©ç”¨æ›´å¤šçš„æ— æ ‡æ³¨æ•°æ® è‡ªç›‘ç£ï¼šä¸åˆ©ç”¨ä»»ä½•å…¶ä»–æ•°æ®ï¼Œä½¿ç”¨é•¿å°¾åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œè‡ªç›‘ç£è®­ç»ƒ åç»­çš„å®éªŒè¿‡ç¨‹ä¸­æˆ‘å¯èƒ½ä¹Ÿä¼šéµå¾ªè¯¥è®¾è®¡ï¼Œæˆ–è€…ä½¿ç”¨çš„æ˜¯å…¨æ•°æ®çš„è‡ªç›‘ç£é¢„è®­ç»ƒã€‚\nè€ƒè™‘å°¾éƒ¨æ ‡ç­¾æœ¬èº«çš„æ„ä¹‰ï¼Œæƒ³è¦åˆ©ç”¨å°¾éƒ¨çš„æ ‡ç­¾ä¿¡æ¯ï¼Œåˆä¸å—åå·®çš„å½±å“ï¼Œå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨è‡ªç›‘ç£è¿›è¡Œé¢„è®­ç»ƒï¼Œç„¶ååé¢ä½¿ç”¨å„ç§æ–¹æ³•å…¼å®¹çš„ä¸€ä¸ªç­–ç•¥ã€‚ MixUp in LT å°†MixUPåº”ç”¨åœ¨LTä¸­ï¼Œè¯•å›¾\u0026quot;ä»¥ä½¿å…¶å…·æœ‰æ›´é«˜çš„æ³›åŒ–æ€§ï¼Œä»¥åŠé™ä½æ¨¡å‹æœ¬èº«çš„ç½®ä¿¡åº¦\u0026quot;[4], ç»è¿‡å®éªŒè¡¨æ˜ï¼Œä»…åœ¨Stage1ä½¿ç”¨MixUPï¼Œåœ¨Stage2çš„ç¬¬äºŒé˜¶æ®µä½¿ç”¨å‡ ä¸ªepochçš„Mixupçš„æ•ˆæœå¯èƒ½ä¼šæ›´å¥½ã€‚\nåœ¨è¿™é‡Œå¯èƒ½ä¹Ÿè¦è€ƒè™‘ä¸€ä¸‹CutMixæ–¹æ³•\nConclusion å®éªŒç»“æœæ±‡æ€» åŸºäºBackBoneå¯¹è¿™äº›æ–¹æ³•çš„å®éªŒç»“æœ($Top1 Acc$)è¿›è¡Œæ±‡æ€»ï¼Œä½œä¸ºæˆ‘ä»¬åç»­ç ”ç©¶çš„å‚ç…§ï¼šåœ¨è¿›è¡Œå®éªŒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè°ƒæ•´å¥½BenchMarkï¼ŒåŸºäºBenchmarkåšçš„æ”¹è¿›æ‰èƒ½å’Œå¯¹åº”çš„æ–¹æ³•è¿›è¡Œå¯¹æ¯”ã€‚\næ•´ç†åŸåˆ™ï¼š\nå¯¹åº”çš„è®ºæ–‡åˆ™ç”±è¯¥è®ºæ–‡æœ¬èº«ä¸ºä¸»ï¼Œåç»­å’ŒLTçš„ä»“åº“è¿›è¡Œå¯¹æ¯”åˆ†æï¼› æœ€ä¸»è¦éœ€è¦å¯¹æ¯”çš„åº”è¯¥æ˜¯ceæƒ…å†µä¸‹çš„æŒ‡æ ‡ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€é‡è¦çš„ï¼Œå½“è¿™ä¸ªæŒ‡æ ‡å¯¹é½åï¼Œæˆ‘ä»¬å°±å¯ä»¥å’Œè¿™äº›æ–¹æ³•åŒå°ç«æŠ€äº†ã€‚ Dataset -\u0026gt; LT-Cifar-100 \u0026lt;- -\u0026gt; LT-CIfar10 \u0026lt;- Backbone Factor(Exp) 100 50 10 100 50 10 ResNet32 RESULT - - - - - - CE 38.32 43.85 55.71 70.36 74.81 86.39 - Focal Loss 38.4 44.3 56.8 70.4 76.7 86.7 - MixUp 39.5 45.0 58.0 73.1 77.8 87.1 - CB Loss 39.6 45.2 58.0 74.6 79.3 87.1 - BAGS-After 47.83 51.69 - 73.59 79.03 - - SSL-Uniform 40.40 45.04 57.07 73.50 78.20 87.72 SSL-Balanced 43.06 47.09 58.06 76.53 80.4 87.72 LDAM 42.0 46.6 58.7 77.0 81.0 88.2 - BBN 42.56 47.07 59.12 79.82 82.18 88.32 - Causal 44.1 50.3 59.6 80.6 83.6 88.5 - Reference é˜…è¯»è¿‡ç¨‹ä¸­è¿˜çœ‹åˆ°ä¸€äº›ä»€ä¹ˆBAGSï¼Œè¿›è¡Œæ•°æ®åˆ†ç»„çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è‚¯å®šä¸ä¼šåœ¨æˆ‘ä»¬çš„æ¡†æ¶ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ†æä¸€ä¸‹è¿™ç§åˆ†ç»„è®­ç»ƒä¸ºä»€ä¹ˆä¼šå¯¹é•¿å°¾çš„åœºæ™¯å­˜åœ¨å·®å¼‚ã€‚\nâ­\u0026ldquo;Bag of Tricks for LT Visual Recognition with Deep Convolutional Neural Network\u0026rdquo; ZHIHU â­\u0026ldquo;BBN: Bilateral-Branch Network with Cumulative Learning for Long-Tailed Visual Recognition\u0026rdquo; ZHIHU CVPR20 â“\u0026ldquo;Long-Tail Learning via Logit Abjustment\u0026rdquo; ICLR 20 zhihu1 | zhihu2 \u0026ldquo;Improving Calibration for Long-Tailed Recognition\u0026rdquo; CVPR21 zhihu â­\u0026ldquo;Distribution Alignment: A Unified Framework for Long-tail Visual Recognition\u0026rdquo; CVPR21 zhihu | zhihu2 \u0026ldquo;Decoupling Representation and Classifier for Long-Tailed Recognition\u0026rdquo; ICLR20 \u0026ldquo;Long-Tailed Classification by Keeping the Good and Removing the Bad Momentum Causal Effect\u0026rdquo; NIPS20 | zhihu \u0026ldquo;Rethinking the Value of Labels for Improving Class-Imbalanced Learning\u0026rdquo; NIPS20| zhihu \u0026ldquo;Contrastive Learning based Hybrid Networks for Long-Tailed Image Classification\u0026rdquo; CVPR21 zhihu æ€»ç»“æ€§ä¸²è®²ï¼š\nLT-Classification ","permalink":"https://metisy.cool/posts/lt-collection/","summary":"\u003cp\u003e@AikenHong 2021\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/mitming/OpenLT\" target=\"_blank\" rel=\"noopener\"\u003eCode of must of those methods\u003c/a\u003e\n\nWe will analysis those tricks on LT situation, and Analysis why it works.\nåœ¨è¿›è¡ŒLTçŸ«æ­£çš„ä»»åŠ¡ä¸­ï¼Œæœ‰å‡ ç§å¸¸è§çš„trickåœ¨å„ç§æ¨¡å‹ä¸­è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¼šå¯¹è¿™å‡ ç§ä¸åŒçš„trickè¿›è¡Œä»‹ç»å’Œåˆ†æã€‚\u003c/p\u003e\n\u003cp\u003eå…¶å®åœ¨æ•°æ®é‡å°‘è¿™ä¸€æ–¹é¢LTå’ŒFew-Shotæ˜¯æœ‰ä¸€å®šçš„OverLapçš„,å¯ä»¥å‚è€ƒä»¥ä¸‹é‚£è¾¹çš„æ€è·¯perhaps\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003e\r\n\u003cdiv class=\"post-img-view\"\u003e\r\n  \u003ca data-fancybox=\"gallery\" href=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/imgs/labimg/20211217165531.png\"\u003e\r\n    \u003cimg alt=\"LT\" loading=\"lazy\" src=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/imgs/labimg/20211217165531.png\"class=\"responsive-image\" src=\"https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/imgs/labimg/20211217165531.png\" style=\"display: block; margin: 0 auto;\"\r\n      alt=\"LT\"  /\u003e\r\n  \u003c/a\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003cscript\u003e\r\n  document.addEventListener(\"DOMContentLoaded\", function() {\r\n      var images = document.querySelectorAll(\".responsive-image\");\r\n      var maxHeight = window.innerHeight / 2.5;\r\n      images.forEach(function(image) {\r\n          image.style.maxHeight = maxHeight + \"px\";\r\n      });\r\n  });\r\n\u003c/script\u003e\r\n\né€šå¸¸æƒ…å†µä¸‹è¿™ç§ä¸¥é‡çš„ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ä¼šä½¿å¾—æ¨¡å‹ä¸¥é‡è¿‡æ‹Ÿåˆäºå¤´éƒ¨ï¼Œè€Œåœ¨å°¾éƒ¨æ¬ æ‹Ÿåˆ\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆä»‹ç» \u003ca href=\"https://zhuanlan.zhihu.com/p/416315017\" target=\"_blank\" rel=\"noopener\"\u003ebag of tricks\u003c/a\u003e\n è¿™ç¯‡è®ºæ–‡ä¸­æ€»ç»“äº†ä¸€äº›å¸¸ç”¨çš„Trickï¼Œå¹¶ç»„åˆå‡ºäº†æœ€ä½³çš„ä¸€å¥—trick\u003c/p\u003e\n\u003cp\u003eç»è¿‡è¯¥æ–‡å®éªŒæ€»ç»“ï¼ŒTrickç»„åˆåº”è¯¥æ˜¯\u003csub\u003e[1]`\u003c/sub\u003eï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨å‰å‡ ä¸ªepochåº”ç”¨input mixupæ•°æ®å¢å¼ºï¼Œç„¶ååé¢fine-tuning;\u003c/li\u003e\n\u003cli\u003e(åŸºäºCAMçš„)é‡é‡‡æ ·æ¥é‡æ–°è®­ç»ƒåˆ†ç±»å™¨;\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå®é™…ä¸Šå°±æ˜¯MixUp + Two-Stageçš„ç­–ç•¥ï¼Œåç»­å¯¹\u003cstrong\u003eMix-up\u003c/strong\u003eè¿™ä¸ªç­–ç•¥å¸¦æ¥çš„ä½œç”¨è¦è¿›è¡Œè¡¥å……äº†è§£ä¸€ä¸‹\u003c/p\u003e\n\u003ch2 id=\"rebalance\"\u003eRebalance\u003c/h2\u003e\n\u003c!-- more --\u003e\r\n\u003cp\u003eå¯¹äºReBalanceçš„æ–¹æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯ä» \u003ccode\u003edata\u003c/code\u003eå’Œ \u003ccode\u003eupdate\u003c/code\u003eä¸¤ä¸ªè§’åº¦æ¥ç¼“è§£Unbalanceæœ¬èº«ï¼Œé€šè¿‡ä»æ•°æ®é‡ä¸Šè¾¾åˆ°é‡æ–°å‡è¡¡ï¼Œæˆ–è€…åŸºäºLossä½¿å¾—bpè¿‡ç¨‹ä¸­èµ‹äºˆTailæ›´é«˜çš„æƒé‡æ¥è¾¾åˆ°ä¼˜åŒ–è¿‡ç¨‹çš„å¹³è¡¡ã€‚\u003c/p\u003e","title":"LT Collection"},{"content":"\rğŸ‘‹ Hi there! I'm AikenHong.\rğŸš€ About Me I am a Machine Learning Engineer and passionate software developer, specializing in AI research, with a strong commitment to exploring the endless possibilities within the IT industry. I hold a master\u0026rsquo;s degree from Xi\u0026rsquo;an Jiaotong University.\nI am currently focused on AI and machine learning projects while diligently working to become a full-stack developer. My enthusiasm for exploring new worlds and concepts is fueled by my love for travel and immersive video games, which inspire my creativity and drive my eagerness to learn and try new things.\nğŸ› ï¸ Skills \u0026amp; Tools Development Languages:\nMain: Python, C++, Bash Learning: JavaScript (HTML \u0026amp; CSS) Future Plans: Rust \u0026amp; Go Development Tools:\nOperating Systems: Mac, Windows, Linux IDEs: VSCode \u0026amp; Vim (Neovim) Terminal Emulators: Windows Terminal, WezTerm, iTerm ğŸ® Fun Fact The strategy and perseverance needed in Souls-like games are traits I carry into my coding and research work. Just like in gaming, patience and creativity are key!\nFeel free to explore my repositories and connect with me for any collaboration. Let\u0026rsquo;s learn and innovate together!\nğŸ”— Connect with Me Fi. ","permalink":"https://metisy.cool/about/","summary":"\u003cp align=\"center\"\u003e\r\n  \u003cimg src=\" https://picture-bed-001-1310572365.cos.ap-guangzhou.myqcloud.com/mac/DSCF4104_%E5%89%AF%E6%9C%AC.JPG\" width=100%\u003e\r\n\u003c/p\u003e\r\n\u003cp align=\"center\"\u003e\r\n  ğŸ‘‹ Hi there! I'm AikenHong.\r\n\u003c/p\u003e\r\n\u003ch3 id=\"-about-me\"\u003eğŸš€ About Me\u003c/h3\u003e\n\u003cp\u003eI am a Machine Learning Engineer and passionate software developer, specializing in AI research, with a strong commitment to exploring the endless possibilities within the IT industry. I hold a master\u0026rsquo;s degree from Xi\u0026rsquo;an Jiaotong University.\u003c/p\u003e\n\u003cp\u003eI am currently focused on AI and machine learning projects while diligently working to become a full-stack developer. My enthusiasm for exploring new worlds and concepts is fueled by my love for travel and immersive video games, which inspire my creativity and drive my eagerness to learn and try new things.\u003c/p\u003e","title":"About Me"},{"content":"è¯¥æ–‡æ¡£ä¸»è¦ç›®çš„æ˜¯ç”¨äºæµ‹è¯•Latexè¯­æ³•å¯¹åº”å‰ç«¯çš„æ¸²æŸ“èƒ½åŠ›ï¼Œä¸»è¦ç”¨äºæµ‹è¯•Hexoç«™ç‚¹æ˜¯å¦èƒ½æ­£å¸¸æ¸²æŸ“Latexã€‚\nExample1: 2 inline in one sentence.\nWhen $a \\ne 0$, there are two solutions to $(ax^2 + bx + c = 0)$ and they are $$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$ Example2: Matrix Example\n$$ \\begin{bmatrix} 1\u0026amp;x\u0026amp;x^2\\ 1\u0026amp;y\u0026amp;y^2\\ 1\u0026amp;z\u0026amp;z^2 \\end{bmatrix} \\ \\begin{bmatrix} 1\u0026amp;x\u0026amp;x^2\\\\ 1\u0026amp;y\u0026amp;y^2\\\\ 1\u0026amp;z\u0026amp;z^2 \\end{bmatrix} \\ vmatrix ||ã€Bmatrix{}ã€pmatrix() $$\nExample3: the Conditional Formula\n$$ f(x)= \\begin{cases} 0\u0026amp; \\text{x=0}\\\\ 1\u0026amp; \\text{x!=0} \\end{cases} $$\nExample4: Sprcial Symboy\n$$ \\lim_{\\alpha \\rightarrow +\\infty} \\frac{1}{\\alpha(\\beta+1)} $$\nExample5: Complex Function Which Occurs Error in Much Situation\n$$\r\\begin{gathered}\r\\mathcal{L}_{POD-final} = \\frac{\\lambda_c}{L-1}\\sum_{l=1}^{L-1} \\mathcal{L}_{POD-spatial}(f_l^{t-1}(x),f_l^t(x)) + \\\\\r\\lambda_f \\mathcal{L}_{POD-flat}(f_l^{t-1}(x),f_l^t(x))\r\\end{gathered}\r$$\rExample6ï¼šMathbbã€Textã€etc\u0026hellip;\n$$\r\\mathcal{L}_{\\text {POD-pixel }}\\left(\\mathbf{h}_{\\ell}^{t-1}, \\mathbf{h}_{\\ell}^{t}\\right)=\\sum_{c=1}^{C} \\sum_{w=1}^{W} \\sum_{h=1}^{H}\\left\\|\\mathbf{h}_{\\ell, c, w, h}^{t-1}-\\mathbf{h}_{\\ell, c, w, h}^{t}\\right\\|^{2}\r$$\rExample7: Multiple Lines of Loss in Incremental Learning\n$$\r\\begin{gathered}\r\\mathcal{L}_{\\text {POD-channel }}\\left(\\mathbf{h}_{\\ell}^{t-1}, \\mathbf{h}_{\\ell}^{t}\\right)=\\sum_{w=1}^{W} \\sum_{h=1}^{H}\\left\\|\\sum_{c=1}^{C} \\mathbf{h}_{\\ell, c, w, h}^{t-1}-\\sum_{c=1}^{C} \\mathbf{h}_{\\ell, c, w, h}^{t}\\right\\|^{2} \\\\\r\\mathcal{L}_{\\text {POD-gap }}\\left(\\mathbf{h}_{\\ell}^{t-1}, \\mathbf{h}_{\\ell}^{t}\\right)=\\sum_{c=1}^{C}\\left\\|\\sum_{w=1}^{W} \\sum_{h=1}^{H} \\mathbf{h}_{\\ell, c, w, h}^{t-1}-\\sum_{w=1}^{W} \\sum_{h=1}^{H} \\mathbf{h}_{\\ell, c, w, h}^{t}\\right\\|^{2} \\\\\r\\mathcal{L}_{\\text {POD-width }}\\left(\\mathbf{h}_{\\ell}^{t-1}, \\mathbf{h}_{\\ell}^{t}\\right)=\\sum_{c=1}^{C} \\sum_{h=1}^{H}\\left\\|\\sum_{w=1}^{W} \\mathbf{h}_{\\ell, c, w, h}^{t-1}-\\sum_{w=1}^{W} \\mathbf{h}_{\\ell, c, w, h}^{t}\\right\\|^{2}\r\\end{gathered}\r$$\rå¦‚æœè¿™äº›éƒ½èƒ½æ­£ç¡®æ¸²æŸ“çš„è¯ï¼ŒåŸºæœ¬æ•´ä¸ªæ–‡æ¡£ä¸­çš„LatexåŸºæœ¬æ¸²æŸ“åº”è¯¥éƒ½æ²¡é—®é¢˜ï¼Œç”¨è¯¥æ–‡æ¡£èƒ½éªŒè¯å½“å‰æœ¬åœ°æ¸²æŸ“çš„ç‰ˆæœ¬æ˜¯å¦æ˜¯æ­£ç¡®çš„ã€‚\n","permalink":"https://metisy.cool/posts/latex_test/","summary":"\u003cp\u003eè¯¥æ–‡æ¡£ä¸»è¦ç›®çš„æ˜¯ç”¨äºæµ‹è¯•Latexè¯­æ³•å¯¹åº”å‰ç«¯çš„æ¸²æŸ“èƒ½åŠ›ï¼Œä¸»è¦ç”¨äºæµ‹è¯•Hexoç«™ç‚¹æ˜¯å¦èƒ½æ­£å¸¸æ¸²æŸ“Latexã€‚\u003c/p\u003e\n\u003cp\u003eExample1: 2 inline in one sentence.\u003c/p\u003e\n\u003cp\u003eWhen $a \\ne 0$, there are two solutions to $(ax^2 + bx + c = 0)$ and they are $$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$\nExample2: Matrix Example\u003c/p\u003e\n\u003cp\u003e$$\n\\begin{bmatrix} 1\u0026amp;x\u0026amp;x^2\\ 1\u0026amp;y\u0026amp;y^2\\ 1\u0026amp;z\u0026amp;z^2 \\end{bmatrix}\n\\\n\\begin{bmatrix} 1\u0026amp;x\u0026amp;x^2\\\\ 1\u0026amp;y\u0026amp;y^2\\\\ 1\u0026amp;z\u0026amp;z^2 \\end{bmatrix}\n\\\nvmatrix ||ã€Bmatrix{}ã€pmatrix()\n$$\u003c/p\u003e\n\u003cp\u003eExample3: the Conditional Formula\u003c/p\u003e\n\u003cp\u003e$$\nf(x)=\n\\begin{cases}\n0\u0026amp; \\text{x=0}\\\\\n1\u0026amp; \\text{x!=0}\n\\end{cases}\n$$\u003c/p\u003e\n\u003cp\u003eExample4: Sprcial Symboy\u003c/p\u003e\n\u003c!-- more --\u003e\r\n\u003cp\u003e$$\n\\lim_{\\alpha \\rightarrow +\\infty} \\frac{1}{\\alpha(\\beta+1)}\n$$\u003c/p\u003e","title":"Latex Function Test"}]